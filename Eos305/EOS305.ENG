ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
                     ฺฤฤฤฤฤฤฤฤฤฟ ฺฤฤฤฤฤฤฤฤฤฟ ฺฤฤฤฤฤฤฤฤฤฟ
                     ภฟ  ฺฤฤฤฟ ณ ณ  ฺฤฤฤฟ  ณ ณ  ฺฤฤฤฤฟ ณ
                      ณ  ณ   ภฤู ณ  ณ   ณ  ณ ณ  ณ    ภฤู
                      ณ  ภฤฤฟ    ณ  ณ   ณ  ณ ณ  ภฤฤฤฤฤฤฟ
                      ณ  ฺฤฤู    ณ  ณ   ณ  ณ ภฤฤฤฤฤฤฟ  ณ
                      ณ  ณ   ฺฤฟ ณ  ณ   ณ  ณ ฺฤฟ    ณ  ณ
                     ฺู  ภฤฤฤู ณ ณ  ภฤฤฤู  ณ ณ ภฤฤฤฤู  ณ
                     ภฤฤฤฤฤฤฤฤฤู ภฤฤฤฤฤฤฤฤฤู ภฤฤฤฤฤฤฤฤฤู
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                 E.O.S Eclipse Operating System  Version 3.05

                        Copyright (c) Eclipse 1995-97

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ In a nutshell what is EOS ?                                              บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * E.O.S is a DOS4GW and PMODEW compatible Dos Extender. It is designed
          for DOS and is Windows(TM) compatible.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.00แ                                              บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * Only one E.O.S. file (no more kernel file)
        * Designed for DOS and compatible with Windows(tm) 3.1 and Windows 95(tm).
        * New libraries for WATCOM C++ users
        * Use of E.O.S instead of DOS4GW possible
        * VESA 2.0 supported (Linear frame buffer)
        * VESA 1.0 reading and writing supported (Automatic Bank Switching)
        * New mapping memory interrupt
        * New external debugger for LE format programs tracing
        * DPMI Server Version 0.90.
        * New memory manager through handle.
        * Data linking possible without compress
        * New WSTUB with the same principle as Dos4GW Stub
        * New and more stable synchronizing function under Windows 95.
        * New module player :
           - 16bits mixing supported
           - Better sound with Sound Blaster cards
           - Windows Sound System supported
           - Independent sample management
           - Manual or automatic detection of sound cards


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.00                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * EOS.LNK added to simplify the makefile under WATCOM.
        * Set_Volume : originally wrong parameters.
        * Init_EOS : now needs the _psp as a parameter.
        * EOS.H : now supports registers and stack parameter conventions.
        * No more crypted files for Windows95(TM) and Soft-Ice(TM)
          users.
        * Bugs fixed in E.O.S, Debug, Joystick and Vesa.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.01                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * New UNBIND.EXE utility to extract DOS4GW.
        * New RS232 library to communicate at 115200 bauds.
        * New SNAP library for VESA 2.0.
        * New GIF library by Thomas Bernard.
        * New macro Border by Thomas Bernard.
        * EOS.H : Constants now in upper case.
        * EOS.H : Functions and variables now in lower case.
        * EOS.H : New joystick functions
        * Bug fixed : macro Get_Param


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.02                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * New EOSCFG.EXE utility to config EXE files.
        * New CDROM library to play CD.
        * New English doc.
        * New function : nb_vbl.
        * Bug fixed : Diamond player (memory manager).
        * Bug fixed : E.O.S (detect VGA).
        * Bug fixed : GIF library by Thomas Bernard.
        * EOS.H : Serial_Stand_By now in volatile.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.03                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * Now support int 24h under Watcom.
        * Now support case sensitive under Watcom.
        * EOS.INC : New declarations.
        * EOS.H   : New declarations.
        * EOS.LNK : New declarations.
        * Bug fixed : E.O.S : Free mapping memory.
        * Bug fixed : E.O.S : Exit_Error.
        * Bug fixed : FLI32 : Close file.
        * Bug fixed : RS232 : Serial_Write.
        * Bug fixed : WSTUB : File not found.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.04                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        * New : E.O.S : Less base memory used.
        * New : LLINK32 : Up to 256 files to be linked.
        * New : Watcom C++ : Removal WATCOM.OBJ file.
        * New : Watcom C++ : FONT function by Thomas Mangin.
        * Bug fixed : Watcom C++ : EOS.H (change_synchro_int_08, set_bank, etc).
        * Bug fixed : Watcom C++ : Fonction STUB.
        * Bug fixed : Watcom C++ : First Argument of main().


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ What's new in version 3.05                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

~v3.05  * New : E.O.S : Windows NT Support (Psp_Sel & Environment_Sel).
~v3.05  * New : E.O.S : function Get_Nb_Vbl.
~v3.05  * New : E.O.S : function Get_Exception
~v3.05  * New : E.O.S : function Set_Exception
~v3.05  * New : E.O.S : New USM library by Freddy Vtl (XM Player).
~v3.05  * New : E.O.S : VESAINFO utility by Thomas Bernard.
~v3.05  * New : E.O.S : New rules for commercial version.
        * Bug fixed : E.O.S : Physical Address Mapping which didn't save EDX.
        * Bug fixed : E.O.S : In Load_Module which didn't save all registers (thank to taco ekkel).
        * Bug fixed : LLINK32 : When you have more than 128 files.
        * Bug fixed : DEBUG : FISTP qword.
        * Bug fixed : DEBUG : FDIVR dword & qword.
        * Bug fixed : EOS.INC : Some fixes.
        * Bug fixed : EOS.H   : Some fixes.
        * Bug fixed : DIAMOND : Change the Detection of GRAVIS to only simple Gravis.
        * Bug fixed : CDROM : Now works under Windows.

New : You can now find all new ehanced features of EOS by searching ~v3.05 in
      this file


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Table of contents                                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

          Legal disclaimer
          Introduction to (all) E.O.S modules
          Creating an OBJ file
          Creating an EXE file
          Using a makefile with Turbo Assembler
          Using a makefile with WATCOM C++
          Include file
          E.O.S functions
          Global Defined Data
          Memory managing
          Memory functions
               ณAllocate Memory
               ณDeAllocate Memory
               ณAllocate Memory Handle
               ณDeAllocate Memory Handle
               ณResize Memory Handle
               ณAllocate Selector
               ณDeAllocate Selector
               ณPhysical Address Mapping
               ณFree Physical Address Mapping
          File handling
          File handling functions
               ณLoad Internal File
               ณLoad External File
               ณLoad Internal File Handle
               ณLoad External File Handle
               ณWrite External File
          Sound cards managing
          Accessing module variables
          Sound effects
          Sound cards missing
          Global Defined Player Variables
          Music and sound effects playing functions
               ณDetect Sound Card
               ณManual Setup
               ณLoad Module
               ณPlay Module
               ณStop Module
               ณClear Module
               ณSet Volume
               ณPlay Sample
               ณGet Info
               ณSet Pattern
          Using a monochrome adapter
          Monochrome adapter functions for debugging
               ณSet Mono
               ณSet String Mono
               ณSet Value Mono
          Keyboard handling
               ณUse Int 09
          Waiting the vertical retrace
          Vertical retrace functions
               ณWait Vbl
~v3.05         ณGet_Nb_Vbl
               ณUse Int 08
               ณChange Synchro Int 08
          Global variables
               ณCode32 Sel
               ณData32 Sel
               ณFlat Data Sel
               ณFlat Code Sel
               ณSlecteur 40h
~v3.05         ณPsp Sel
~v3.05         ณEnvironment Sel
               ณReal DS
               ณReal ES
               ณReal FS
               ณReal GS
               ณReal SS
               ณReal SP
               ณ0b0000h
               ณ0b8000h
               ณ0a0000h
          Macros
               ณColors
               ณGet Param
               ณSend
               ณDosInt
               ณDosCall
               ณInit ES DI
               ณInit DS DX
          Real mode
          Interrupts
          IRQ handling
          Exceptions
          Interrupt functions
               ณGet Int
               ณSet Int
               ณGet Irq
               ณSet Irq
~v3.05    Exceptions function
~v3.05         ณGet Exception
~v3.05         ณSet Exception
          Linker
          32 bits debugger
               ณDEBUG.OBJ
               ณWDEBUG.EXE et UNBIND.EXE
          32 bits debugger functions
               ณDebug
               ณDebug Back
          Calling the debugger with Break point
               ณBreak Point
          Automatic Environment Restoration
          System calls
               ณExit Error
               ณRestore Video Mode
               ณDetect Windows
               ณDirect Send
          Developping a WATCOM C or E.O.S library
               ณMemory managing under WATCOM
               ณREAL mode Interruption calls
               ณInvalid variables under WATCOM
               ณSource files differences
~v3.05    About Windows NT
          E.O.S libraries
          VESA library
               ณAutomatic Bank Switching en VESA 1.0 ou 2.0
               ณLinear Frame Buffer en VESA 2.0
          VESA library functions
               ณInit Vesa
               ณInit Vesa2
               ณInit Vesa Bank
               ณClose Vesa Bank
               ณSet Bank
          VESA library global variables
               ณVesa Clear Palette
          VESA library constants
          FLI32 library
          FLI32 library functions
               ณLoad Fli
               ณLoad Internal Fli
               ณFirst Frame Fli
               ณNext Frame Fli
               ณDispose Fli
          SNAP library
          SNAP library functions
               ณInit Snap
               ณSnap IFF
               ณSave IFF
          JOYSTICK library
          JOYSTICK library functions
               ณInit Joystick
               ณDectect Joystick
               ณAdd Joystick
               ณUpdate Joystick
               ณSub Joystick
               ณUpper Left
               ณLower Right
               ณCenter
          JOYSTICK library constants
          Memory library
          Memory library functions
               ณInit Memory
          RS232 library
          RS232 library functions
               ณSerial Open
               ณSerial Close
               ณSerial Read
               ณSerial Read Block
               ณSerial Write
               ณSerial Write Block
               ณSerial Clear Buffer
               ณSerial Status
               ณSerial Set Dtr
               ณSerial Reset Dtr
               ณSerial Set Rts
               ณSerial Reset Rts
               ณSerial Stand By
               ณSerial Buffer Full
          RS232 library constants
          CDROM library
          CDROM library functions
               ณDetect CDROM
               ณOpen CDROM
               ณClose CDROM
               ณPlay Track
               ณStop CDROM
               ณResume CDROM
               ณGet Nb Tracks
               ณGet Track Info
               ณGet Current Track Info
          Accessing the different variables of a CD-ROM
          The libraries of the E.O.S users
~v3.05    The Freddy Vtl's USM library
~v3.05    Functions of the Freddy Vtl's USM library
          Thomas Mangin's FONT library
               ณPrint Screen Size
               ณPrint Vesa Version
               ณPrint Vesa Memory
               ณPrint Goto X
               ณPrint Goto Y
               ณPrint Goto XY
               ณPrint Color
               ณPrint Char
               ณPrint Text
               ณPrint Hex
               ณPrint Dec
          Thomas Bernard's GIF library
          Functions of Thomas Bernard's GIF library
               ณLoad External Gif Handle
               ณLoad Internal Gif Handle
               ณGif Handle
               ณGif X
               ณGif Y
               ณGif Palette
          E.O.S supported DPMI functions (interrupt 31h)
          E.O.S supported DOS functions (interrupt 21h)


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Legal disclaimer                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

All trademarks used in this documentation are property of their respective
owners.

Unauthorized copying, adaptation, cable transmission, distribution or extraction
of the commercial version of E.O.S. (or any trademark or copyright work that
forms part of E.O.S) are prohibited. However the shareware version of E.O.S.
is free of any restrictions as far as copying, cable transmission, distribution
are concerned, provided this documentation is included, and the purpose of the
distributor is not commercial.

Besides it is strictly forbidden to include the E.O.S in any embedded system, ~v3.05
i.e. as a launcher included in an application.                                ~v3.05

In no event shall the authors be held responsible for any damage caused by
E.O.S or its misuse. Besides this product is provided with no support and
without any obligation on the part of the authors to assist in its use,
correction, modification or enhancement.



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Introduction to E.O.S modules                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The E.O.S consists of several files.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
  Shareware version
* Commercial version
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

        Basic files for Tasm and Masm :

                 EOS.OBJ       Kernel and Diamond player add-in.
                 EOSLITE.OBJ   Light kernel version without Diamond
                                player.
                 DIAMOND.OBJ   32 channel-module player.

                 EOS.INC       the include file.


        Basic files for WATCOM C++ :

                 WEOS.EXE      Kernel and Diamond player add-in
                  WSTARTUP.OBJ
                 WEOSLITE.EXE  Light kernel version without Diamond
                                player

                 EOS.H         Include file

                 EOS.LNK       Linking file for wlink


        The debugger for Tasm, Masm and WATCOM C++ :

                 DEBUG.OBJ     used to allow 32 bits code debugging
               * MEMORY.OBJ    continually displays the remaining memory
                                on the monochrome screen.

        TASM and MASM libraries :

                 GIF.OBJ       uncompresses GIF pictures.
               * VESA.OBJ      directly accesses the graphic card buffer
                                overlooking bank changes under
                                VESA 1.0.
               * FLI32.OBJ     visualises FLI and FLC files.
               * SNAP.OBJ      snap-shoots 256-colour
                                screens.
               * JOYSTICK.OBJ  handles joysticks.
               * RS232.OBJ     communicates at 115200 bauds.
               * CDROM.OBJ     to play CD.


        Libraries for WATCOM C++ :

                 WGIF.OBJ      uncompresses GIF pictures.
               * WVESA.OBJ     directly accesses the graphic card buffer
                                overlooking bank changes under
                                VESA 1.0.
               * WFLI32.OBJ    visualises FLI and FLC files.
               * WSNAP.OBJ     snap-shoots 256-colour
                                screens.
               * WJOYSTICK.OBJ handles joysticks.
               * WRS232.OBJ    communicates at 115200 bauds.
               * WCDROM.OBJ    to play CD.


        Tools :

                 EOSCFG.EXE    The exe configuration file.
                 LLINK.EXE     Single compressed file linker.
                 CRYPT.EXE     Data protection.
                 SCANCODE.EXE  Scancode displayer.
                 132.EXE       132 columns mode switch.
                 EDCONFIG.EXE  Debugger configuration.
                 DIET.EXE      Data compression.
                 DIAMOND.EXE   tests a module.
                 CDROM.EXE     tests a cd.
                 WSTUB.EXE     External use of E.O.S.
                 WSTUBLTE.EXE  Light version without Diamond player.
                 UNBIND.EXE    extracts DOS4GW from an executable.
               * WDEBUG.EXE    debuggs LE programs.
~v3.05           VESADTCT.EXE  List all informations about the graphics card


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Creating an OBJ file                                                     บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

         From MS-Dos Prompt, simply type :

                TASM My_program.asm /m /q /p


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Creating a EXE file                                                      บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

        If you are not using the module player :

                TLINK eoslite+My_prog /3 /x


        If you are using the module player :

                TLINK eos+diamond+My_prog /3 /x


        If you are using a library :

                TLINK  eos+diamond+My_lib+My_prog /3 /x


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Using a makefile with Turbo Assembler                                    บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Borland's MAKE.EXE program automatically assembles and links your application
as defined in a script file called makefile.

Example of makefile :

        PRG = EXAMPLE1
        RES = ..\RESOURCE

        $(PRG).exe:    $(PRG).obj                  \

                @tlink $(RES)\eoslite              \
                       $(PRG),$(PRG).EXE /3 /x

        $(PRG).obj: $(PRG).asm
                @tasm  $(PRG) /m /q /p

To create your executable, simply type MAKE.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Using a makefile with WATCOM C++                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

WATCOM's WMAKE.EXE program automatically assembles and links your application
like Borland's MAKE.EXE.

Example of makefile :

        PROGNAME = TEST
        RES      = ..\RESOURCE

        CFLAGS = /j /mf /fpi87 /fp3 /4s /oailt -4
        CC = WCC386

        .c.obj:
                $(CC) $(CFLAGS) $*.c

        all: $(PROGNAME).exe

        $(PROGNAME).exe : $(PROGNAME).obj

           @wlink F $(PROGNAME) \
                  @$(RES)\eos.lnk system eoslite_c

To create your executable, simply type MAKE or WMAKE /u.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Include file                                                             บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The include file (EOS.INC or EOS.H) is the most important file, as it contains
each function prototype, macro and global data used by the E.O.S. Your program
and the E.O.S are thus able to communicate.



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ E.O.S functions                                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The E.O.S system provides very useful functions that can be called through
the Int_EOS interrupt.

All it takes is to specify the desired function with the AH register :


        mov ah,Function_to_be_called
        Int_EOS


List of functions available

EOS.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAllocate Memory                                                           ณ
ณDeAllocate Memory                                                         ณ
ณAllocate Memory Handle                                                    ณ
ณDeAllocate Memory Handle                                                  ณ
ณResize Memory Handle                                                      ณ
ณAllocate Selector                                                         ณ
ณDeAllocate Selector                                                       ณ
ณPhysical Address Mapping                                                  ณ
ณFree Physical Address Mapping                                             ณ
ณ                                                                          ณ
ณLoad Internal File                                                        ณ
ณLoad External File                                                        ณ
ณLoad Internal File Handle                                                 ณ
ณLoad External File Handle                                                 ณ
ณWrite External File                                                       ณ
ณ                                                                          ณ
ณSet Mono                                                                  ณ
ณSet String Mono                                                           ณ
ณSet Value Mono                                                            ณ
ณ                                                                          ณ
ณUse Int 09                                                                ณ
ณ                                                                          ณ
ณWait Vbl                                                                  ณ
ณGet Nb Vbl                                                                ณ~v3.05
ณUse Int 08                                                                ณ
ณChange Synchro Int 08                                                     ณ
ณ                                                                          ณ
ณGet Int                                                                   ณ
ณSet Int                                                                   ณ
ณGet Irq                                                                   ณ
ณSet Irq                                                                   ณ
ณ                                                                          ณ
ณGet Exception                                                             ณ~v3.05
ณSet Exception                                                             ณ~v3.05
ณ                                                                          ณ
ณExit Error                                                                ณ
ณ                                                                          ณ
ณRestore Vido Mode                                                        ณ
ณ                                                                          ณ
ณDetect Windows                                                            ณ
ณ                                                                          ณ
ณDirect Send                                                               ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

DIAMOND.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect Sound Card                                                         ณ
ณManual Setup                                                              ณ
ณLoad Module                                                               ณ
ณPlay Module                                                               ณ
ณStop Module                                                               ณ
ณClear Module                                                              ณ
ณSet Volume                                                                ณ
ณPlay Sample                                                               ณ
ณGet Info                                                                  ณ
ณSet Pattern                                                               ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Global Defined Data                                                      บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

To simplify your coding the E.O.S possesses a few useful constants :


  On         = 1
  Off        = 0
  B          = Byte Ptr
  W          = Word Ptr
  D          = Dword Ptr
  F          = Fword Ptr
  O          = Offset

Example :

        mov edi, O File_Name

        or

        mov edi, Offset File_Name


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Memory handling                                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The E.O.S solves all memory problems. Now you can access all memory
available lineary whatever your system :


         Mode RAW  sans Himem.
         Mode XMS  avec Himem.
         Mode VCPI avec EMS (Emm386 highscan).
         Mode VCPI sans EMS (Emm386 noems).
         Mode DPMI avec Windows 3.1x.
         Mode DPMI avec Windows 95.
         Mode DPMI avec OS/2 2.1 ou OS/2 Warp.


It only takes an interrupt of the E.O.S to allocate or free memory :



        Direct allocation :

                mov ah,Allocate_Memory
                mov edx,Taille_Allocation
                Int_EOS
                jc Not_Enough_Memory
                mov [Logical_Address_Of_Block],edx


        Restoration of the last allocation :

                mov ah,DeAllocate_Memory
                Int_EOS


        Allocation par handle :

                mov ah,Allocate_Memory_Handle
                mov edx,Taille_Allocation
                Int_EOS
                jc Not_Enough_Memory
                mov [Logical_Address_Of_Block],edx
                mov [Memory_Handle],edi


        Restoration through/by handle :

                mov ah,DeAllocate_Memory_Handle
                mov edi,[Memory_Handle]
                Int_EOS
                jc Invalid_Handle


You can also easily create your own selectors and take the most of the
protected mode segmentation.


        Allocation d'un slecteur :

                mov ah,Allocate_Selector
                mov esi,0a0000h     ; Base
                mov edi,0fh         ; 64ko (0000-ffff)
                Int_EOS
                jc No_Free Selector
                mov [_0a0000h_Sel],bx


        Restitution d'un slecteur :

                mov ah,DeAllocate_Selector
                mov bx,[_0a0000h_Sel]
                Int_EOS
                jc Invalid_Selector


You can also map the memory to access the graphic card lineary :


                mov ah,Physical_Address_Mapping
                mov ecx,1024*1024
                mov esi,[Vesa_Linear_Address]
                Int_EOS
                jc Not_Enough_Memory


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Memory handling functions                                                บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAllocate Memory              ณ
ณDeAllocate Memory            ณ
ณAllocate Memory Handle       ณ
ณDeAllocate Memory Handle     ณ
ณResize Memory Handle         ณ
ณAllocate Selector            ณ
ณDeAllocate Selector          ณ
ณPhysical Address Mapping     ณ
ณFree Physical Address Mappingณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAllocate Memory   Allocate Upper memory                                   ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Allocate_Memory                                              ณ
ณ       EDX = Size of memory block to allocate in bytes                    ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       EAX = Physical address of the block (work with Flat_Data_Sel)      ณ
ณ       EDX = Logical address of the block (work with Data32_Sel)          ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't allocate memory                                        ณ
ณ       EAX = Largest available free memory                                ณ
ณ       EDX = Total available memory                                       ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Allocate_Memory
            mov edx,[Allocation_Size]
            Int_EOS
            jc Not_Enough_Memory
            mov [Physical_Address_Of_Block],eax     ; Work with Flat_Data_Sel
            mov [Logical_Address_Of_Block],edx      ; Work with Data32_Sel


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDeAllocate Memory   Free the last allocate memory                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = DeAllocate_Memory                                            ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,DeAllocate_Memory
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAllocate Memory Handle  Allocate Upper memory with handle                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Allocate_Memory                                              ณ
ณ       EDX = Size of memory block to allocate in bytes                    ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       EAX = Physical address of the block (work with Flat_Data_Sel)      ณ
ณ       EDX = Logical address of the block (work with Data32_Sel)          ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't allocate memory                                        ณ
ณ       EAX = Largest available free memory                                ณ
ณ       EDX = Total available memory                                       ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Allocate_Memory_Handle
            mov edx,[Allocation_Size]
            Int_EOS
            jc Not_Enough_Memory
            mov [Physical_Address_Of_Block],eax     ; Work with Flat_Data_Sel
            mov [Logical_Address_Of_Block],edx      ; Work with Data32_Sel
            mov [Memory_Handle],edi


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDeAllocate Memory Handle  Free the allocate memory with this handle       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = DeAllocate_Memory                                            ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Invalid handle                                               ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,DeAllocate_Memory_Handle
            mov edi,[Memory_Handle]
            Int_EOS
            jc Invalid_Handle


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณResize Memory Handle    Resize the allocate memory with this handle       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Resize_Memory_Handle                                         ณ
ณ       ECX = New Size of the memory block                                 ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       EAX = Physical address of the block (work with Flat_Data_Sel)      ณ
ณ       EDX = Logical address of the block (work with Data32_Sel)          ณ
ณ       EDI = New Handle of Memory                                         ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Invalid handle                                               ณ
ณ             Not Enough Memory                                            ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Resize_Memory_Handle
            mov edi,[Memory_Handle]
            Int_EOS
            jc Invalid_Handle
            mov [Memory_Handle],edi
            mov [Addr_Memory],edx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAllocate Selector   Create a new selector (Data type)                     ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Allocate_Selector                                            ณ
ณ       ESI = Physical base address of the new selector                    ณ
ณ       EDI = Size of the new selector modulo 4096                         ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ        BX = New selector                                                 ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't create selector                                        ณ
ณ                                                                          ณ
ณOther Registers Change : EAX                                              ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Allocate_Selector
            mov esi,0a0000h
            mov edi,0fh         ; 64ko (0000-ffff)
            Int_EOS
            jc No_Free Selector
            mov [_0a0000h_Sel],bx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDeAllocate Selector   Free a Selector                                     ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = DeAllocate_Selector                                          ณ
ณ        BX = Selector                                                     ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't deallocate selector                                    ณ
ณ                                                                          ณ
ณOther Registers Change :  EAX,EBX                                         ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,DeAllocate_Selector
            mov bx,[_0a0000h_Sel]
            Int_EOS
            jc Invalid_Selector


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPhysical Address Mapping           Allocate memory mapping                ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Physical_Address_Mapping                                     ณ
ณ       ECX = Size Of region                                               ณ
ณ       ESI = Physical address of memory                                   ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ       ESI = Linear Address of the region                                 ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Room free                                                 ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Physical_Address_Mapping
            mov ecx,1024*1024
            mov esi,[Vesa_Linear_Address]
            Int_EOS
            jc Not_Enough_Memory


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณFree Physical Address Mapping      Free the allocate memory mapping       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Free_Address_Mapping                                         ณ
ณ       ESI = Address of the block to free                                 ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Invalid address                                              ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Free_Physical_Address_Mapping
            mov esi,[Vesa_Linear_Address]
            Int_EOS
            jc Invalid_Address


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ File handling                                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Loading a file in the RAM is now easy

        Loading an external file :

                mov ah,Load_External_File
                mov edx,offset File_name
                Int_EOS
                jc Error_File
                mov File_Buffer,eax


        Loading a file linked with Lightlink (Linker provided with E.O.S)


                mov ah,Load_Internal_File
                mov edx,offset File_name
                Int_EOS
                mov File_Buffer,eax


        Restoration of the last allocation :

                mov ah,DeAllocate_Memory
                Int_EOS


        Loading an external file with (a) handle:

                mov ah,Load_External_File_Handle
                mov edx,offset File_name
                Int_EOS
                jc Error_File
                mov File_Buffer,eax
                mov Memory_Handle,edi


        Restoration through/by handle :

                mov ah,DeAllocate_Memory_Handle
                mov edi,[Memory_Handle]
                Int_EOS
                jc Invalid_Handle


The function Load_Internal_File also works if the program is not linked. E.O.S
can distinguish both cases, so that a program can be developed and tested
without linking data. Moreover, if your file is LZ-compressed like Diet 1.44
E.O.S automatically uncompresses it.


        The procedure/operation is also possible the other way round:

                mov ah,Write_External_File
                mov edx,O File_name
                mov esi,[Buffer]
                mov ecx,[Size_Buffer]
                Int_EOS
                jc Error_File


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ File handling functions                                                  บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Internal File       ณ
ณLoad External File       ณ
ณLoad Internal File Handleณ
ณLoad External File Handleณ
ณWrite External File      ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Internal file   Load a file which is link with LLINK                 ณ
ณ                     if the file is not present the program stop and      ณ
ณ                     display a error message                              ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Load_Internal_File                                           ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       EAX = Logical address of buffer (work with Data32_Sel)             ณ
ณ       ECX = Number of bytes read                                         ณ
ณ       ESI = Physical address of buffer (work with Flat_Data_Sel)         ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Load_Internal_File
            mov edx,O File_name
            Int_EOS
            mov [File_Buffer],eax


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad External file   Load a external file and uncompress it if it has     ณ
ณ                     been compress with Diet 1.44                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Load_External_File                                           ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = Logical address of buffer (work with Data32_Sel)             ณ
ณ       ECX = Number of bytes read                                         ณ
ณ       ESI = Physical address of buffer (work with Flat_Data_Sel)         ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 File Not Found                                             ณ
ณ             2 Not Enough Memory                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Load_External_File
            mov edx,O File_name
            Int_EOS
            jc Error_File
            mov [File_Buffer],eax


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Internal File Handle  Load a file which is link with LLINK           ณ
ณ                           if the file is not present the program stop    ณ
ณ                           and display a error message                    ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Load_Internal_File_Handle                                    ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       EAX = Logical address of buffer (work with Data32_Sel)             ณ
ณ       ECX = Number of bytes read                                         ณ
ณ       ESI = Physical address of buffer (work with Flat_Data_Sel)         ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Load_Internal_File_Handle
            mov edx,O File_name
            Int_EOS
            mov [File_Buffer],eax
            mov [Memory_Handle],edi


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad External File Handle  Load a external file and uncompress it if it   ณ
ณ                           has been compress with Diet 1.44               ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Load_External_File_Handle                                    ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = Logical address of buffer (work with Data32_Sel)             ณ
ณ       ECX = Number of bytes read                                         ณ
ณ       ESI = Physical address of buffer (work with Flat_Data_Sel)         ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 File Not Found                                             ณ
ณ             2 Not Enough Memory                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Load_External_File_Handle
            mov edx,O File_name
            Int_EOS
            jc Error_File
            mov [File_Buffer],eax
            mov [Memory_Handle],edi


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณWrite External File  Save a File on a Disk                                ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Write_External_File                                          ณ
ณ       ECX = Size Of File                                                 ณ
ณ       EDX = Offset of file name                                          ณ
ณ       ESI = Buffer address                                               ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        Tout Va Bien                                                      ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Erreur  Can't write file                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Write_External_File
            mov edx,O File_name
            mov esi,[Buffer]
            mov ecx,[Size_Buffer]
            Int_EOS
            jc Error_File


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Sound card handling                                                      บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Handling sound card was not overlooked.

E.O.S is indeed able to play a sample or an Amiga module (from 2 to 32
channels) without setting up any of the nine following cards :


         Sound Blaster
         Sound Blaster Pro
         Sound Blaster 16 Asp
         Sound Blaster AW32
         Gravis Ultrasound
         Gravis Ultrasound Max
         Gravis Ultrasound Ace
         Gravis Ultrasound Pnp
         Windows Sound System

To get the best possible mixing, E.O.S automatically chooses the mixing
required by the present sound card (8 bits for SB pro,16 bits for SB 16,etc...)


Warning : This is achieved by the environment variable (Blaster or Ultrasnd).
If this variable is not properly set the sound card will not be detected.



        Example :

                mov ah,Detect_Sound_Card
                xor bx,bx
                mov cx,1
                Int_EOS

                You can choose no to use the automatic detection :

                mov ah,Manual_Setup
                mov al,Gravis
                mov bx,220h
                mov cl,7
                mov ch,7
                mov dl,1
                mov dh,1
                Int_EOS

                After detecting a card a module must be loaded (in the RAM)


                mov ah,Load_Module
                mov al,4
                mov ebx,22000
                mov edx,offset Module_name
                xor ecx,ecx
                Int_EOS
                jc error_file

                Eventually play it :

                mov ah,Play_Module
                Int_EOS

                Several functions are thus available :

                        Set Volume   changes volume and music
                        Play Sample  plays a sample
                        Get Info     provides information about the music
                                     (synchronization for instance)
                        Set Pattern  changes the position in a module

                call Pause

                mov ax,4c00h
                int 21h

As seen above, you do not have to stop playing the music or free memory
before quitting your program. E.O.S does the job for you. Every time E.O.S
comes across function 4c00h or when the computer crashes, E.O.S automatically
restores the original environment :


         The video mode including VESA modes (132x60, etc...)
         The clock
         Interrupts
         The allocated memory
         Stops playing the music

it is obviously possible to free memory and stop a module to load
another one as specified bellow:

                mov ah,Stop_Module
                Int_EOS

                mov ah,Clear_Module
                Int_EOS


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Accessing the different variables of a module                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

To get the informations of a module, you can use the Get_Info function or
directly access the variables as specified bellow :

Sound_Card_Type                 : Byte
Sound_Card_Port                 : Word
Sound_Card_Irq                  : Byte
Sound_Card_Dma                  : Byte
Master_Volume                   : Byte
Master_Volume_Sfx               : Byte
Current_Pattern                 : Byte
Current_Note                    : Byte
Current_Speed                   : Byte
Current_BPM                     : Byte
Index_Pattern_Order             : Dword
Pattern_Order                   : Byte
Number_Channel                  : Dword
Diamond_Channel                 : MS

MS                              struc
        Current_Sample          dd      0      ; (Current Sample*4)-4
        Porta                   dw      ?      ; Porta value (0..FF)
        Tremelo                 db      ?      ; Tremelo value (0..FF)
        Current_Position        dd      ?      ; Software mixing HI position
        Current_Low_Position    dd      ?      ; Software mixing Low position
        Jump_0e6                db      ?      ; Note for restart the loop
        Compt_jump_0e6          db      ?      ; Nb of Repeat for E6 effect
        Flags_0e6               db      ?      ; On or Off for E6 effect
        Porta_Freq              dw      ?      ; Final Value for a porta to
        Porta_To                dw      ?      ; Porata to value
        Vibrato                 db      ?      ; Value for Vibrato
        Vibrato_Flag            db      ?      ; Index of Sinus for Vibrato
        FineTune                dw      ?      ; Current FineTune
        Last_Effect             dd      0      ; Offset of the last effect procedure
        Voice                   db      ?      ; Voice Number (Gravis)
        Sample_volume           db      ?      ; Current Sample Volume
        Base_Sample_Volume      db      ?      ; Sample Volume
        Mute                    db      ?      ; On is a channel is mute
        Frequence               dw      ?      ; Current Frequence of the sample
        Compt_Frequence         dd      ?      ; Value to add in Software mixing
        New_sample              db      ?      ; On for a new sample
        Arp                     dw      ?,?,?  ; Value for Arpegio
        Arp_Counter             dw      ?      ;
        Slide_volume            dw      ?      ; Value for Slide Volume
        Panning                 db      ?      ; Not supported
        Retrig_Note             db      ?      ; On for a retrig note
        Retrig_Note_Val         db      ?      ; Value to Wait for the retrig note
        Cut_Note                db      ?      ; Cut Note value
        Delay_Note              db      ?      ; Delay Not value
                                db      0
        Delay_Note_Offset       dd      ?
        Addr_Read_Again         dd      ?
MS                              ends


Example :

            mov [Master_Volume],32      ; Set Music Volume
            mov [Master_Volume_Sfx],63  ; Set Sample Volume


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Sound card missing                                                       บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Thanks to E.O.S you can play a module even if the sound card is missing.
Needless to modify such machines/computers therefore, if some events are
synchronized with the music.



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Global Defined Player Variables                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

  No_Card    = 0
  Sb_10      = 01h
  Sb_15      = 02h
  Sb_20      = 03h
  Sb_Pro     = 04h
  Sb_16      = 05h
  Sb_Awe     = 06h
  Gravis     = 10h
  Gravis_Max = 11h
  Gravis_Ace = 12h
  Gravis_Pnp = 13h
  WSS        = 20h


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Sound effects                                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

E.O.S can play samples regardless of the music. It only takes to declare
create fictitious tracks when a module is loaded :


Example :
            mov ah,Load_Module
            mov al,4+1
            mov bx,22000
            mov ecx,1               ; Number of channels for sound effects
            mov edx,O Module_Name
            Int_EOS
            jc Error_Loading_Module


You can play a sample whenever you want(...)

            mov ah,Play_Sample
            mov cx,339              ; Freq.
            mov dx,00               ; Sfx Channel 1
            mov bx,09h              ; Sample number
            Int_EOS

It is also possible to know what the position of the module is at any time :

            mov ah,Get_Info
            Int_EOS

Compared with FT2, the current position of the module in AH is displayed on the
left in the upper double column. This value normally increases by 1 with each
new pattern.

AL corresponds to the current pattern being played. In FT2 it is the figure on
the right in the double column mentioned above. This value can have different
values.

BX is the current position in the pattern. This value is comprised between
0 and 63.


Position Pattern
AH =  ณ  ณ AL =
        
     ษออหออป ฺฤฟ
     บ00บ00บ ณณ
     บ01บ01บ รฤด
     บ02บ01บ ณ ณ
     บฤฤืฤฤถ ณ ณ
     บ03บ02บ ณ ณ
     บฤฤืฤฤถ ณ ณ
     บ04บ01บ ณ ณ
     บ05บ03บ รฤด
     บ06บ04บ ณณ
     ศออสออผ ภฤู


        ..
        10 บC#5ณ10ณF05บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ
        11 บ   ณ  ณ...บB-4ณ10ณ...บB-3ณ10ณ492บ   ณ  ณ...บ
        12 บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ
Note  ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
BX =    13 บC#5ณ10ณF05บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ
      ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
        14 บ   ณ  ณ...บA-3ณ01ณA10บ   ณ  ณ...บA-1ณ02ณC05บ
        15 บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ   ณ  ณ...บ
        ..




ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions to play music or sound effects                                 บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect Sound Cardณ
ณManual Setup     ณ
ณLoad Module      ณ
ณPlay Module      ณ
ณStop Module      ณ
ณClear Module     ณ
ณSet Volume       ณ
ณPlay Sample      ณ
ณGet Info         ณ
ณSet Pattern      ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect Sound Card   Detect with the environment variable the sound        ณ
ณ                    card installed                                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Detect_Sound_Card                                            ณ
ณ        CX = 1  Display result of Searching                               ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        AX = 0  No_Card                                                   ณ
ณ           = 1  Sound Blaster 1.0                                         ณ
ณ           = 2  Sound Blaster 1.5                                         ณ
ณ           = 3  Sound Blaster 2.0                                         ณ
ณ           = 4  Sound Blaster Pro                                         ณ
ณ           = 5  Sound Blaster 16                                          ณ
ณ           = 6  Sound Blaster Awe 32                                      ณ
ณ           = 10h  Gus                                                     ณ
ณ           = 11h  Gus Max                                                 ณ
ณ           = 12h  Gus Ace                                                 ณ
ณ           = 13h  Gus Pnp                                                 ณ
ณ           = 20h  Windows Sound System                                    ณ
ณ        BX = Port                                                         ณ
ณ        CX = Irq                                                          ณ
ณ        DX = Dma                                                          ณ
ณ        SI = Dsp Version (For Sb) ou                                      ณ
ณ             Size of RAM of the Gravis                                    ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Detect_Sound_Card
            mov cx,1
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณManual Setup                                                              ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Manual_Setup                                                 ณ
ณ        AL = Type                                                         ณ
ณ        BX = Port                                                         ณ
ณ        CL = Irq1                                                         ณ
ณ        CH = Irq2      ; Irq Gus 2                                        ณ
ณ        DL = Dma1      ; Dma Gus 1 or Dma 8 Bits for SB                   ณ
ณ        DH = Dma2      ; Dma Gus 2 or Dma 16 Bits for SB                  ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry Off                                                         ณ
ณ        Init Ok                                                           ณ
ณ                                                                          ณ
ณ        Carry On                                                          ณ
ณ        No Sound Card Found                                               ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

            mov ah,Manual_Setup
            mov al,Gravis
            mov bx,220h
            mov cl,7
            mov ch,7
            mov dl,1
            mov dh,1
            Int_EOS
            ...
            mov ah,Manual_Setup
            mov al,Sb_16
            mov bx,220h
            mov cl,7
            mov dl,1
            mov dh,5
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Module   Load a module & initialize into the memory                  ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Load_Module                                                  ณ
ณ        AL = Bit 0 = 1  Load a internal module (can be compress and link  ณ
ณ                        with LLINK)                                       ณ
ณ           = Bit 1 = 1  Load module  from memory                          ณ
ณ           = Bit 2 = 1  Force old mod Loading (15 instr)                  ณ
ณ        BX = Replay rate (16000 to 44100 Hz)                              ณ
ณ        CX = Number of Sfx Channel                                        ณ
ณ        DS:EDX = Offset of Module name or                                 ณ
ณ                 Offset into the memory of the beginning of the module    ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't Load Module                                            ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Load_Module
            mov al,4+1
            mov bx,22000
            xor ecx,ecx
            mov edx,O Module_Name
            Int_EOS
            jc Error_Loading_Module


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPlay Module   Start playing the module                                    ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Play_Module                                                  ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't Play Module                                            ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Play_Module
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณStop Module   Stop playing module                                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Stop_Module                                                  ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Stop_Module
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณClear Module   Unload the module from memory                              ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Clear_Module                                                 ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Clear_Module
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Volume   Set the master volume of the module                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Set_Volume                                                   ณ
ณ        BL = Volume (0 to 63)                                             ณ
ณ        CL = Sfx Volume (0 to 63)                                         ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Volume
            mov bl,[New_Volume]
            mov cl,[New_Volume_Sfx]
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPlay Sample   Play a sample include into the module                       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Play_Sample                                                  ณ
ณ        BX = Sample numbers                                               ณ
ณ        CX = Sample Frequency                                             ณ
ณ        DX = voice of sample                                              ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Play_Sample
            mov bx,10
            mov cx,15fh
            mov dx,4
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet Info   Get information about the module when playing                  ณ
ณ                                                                          ณ
ณIn:                                                                       ณ
ณ        AH = Get_Info                                                     ณ
ณ                                                                          ณ
ณOut:                                                                      ณ
ณ        AH = Position                                                     ณ
ณ        AL = Pattern                                                      ณ
ณ        BX = Note                                                         ณ
ณ        CL = Master Volume                                                ณ
ณ        DL = Master Volume Sfx                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Get_Info
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Pattern  Set the current position of the playing module               ณ
ณ                                                                          ณ
ณIn:                                                                       ณ
ณ        AH = Set_Pattern                                                  ณ
ณ        BX = New_Position                                                 ณ
ณ        CX = New_Note                                                     ณ
ณ                                                                          ณ
ณOut:                                                                      ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Pattern
            mov bx,[New_Position]
            mov cx,[New_Note]
            Int_EOS


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Using a monochrome adapter                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

To debbug your programs more easily, E.O.S provides functions that enable
you to control a second screen via a monochrome card of the Hercule type.


E.O.S automatically detects your screen. If the latter was not acknowledged
though, you can use the following piece of code :

                mov ah,Set_Mono
                mov bx,On
                Int_EOS

Two functions are therefore available : displaying an ASCII string and
displaying an Hexadecimal value.

        Displaying an ASCII string :

                mov ah,Set_String_Mono
                mov bx,Coordonee X
                mov cx,Coordonee Y
                mov edx,Offset Chaine_A_Afficher
                Int_EOS

        Displaying an Hexadecimal value :

                mov ah,Set_Value_Mono
                mov bx,Coordonee X
                mov cx,Coordonee Y
                mov edx,Valeur_A_Afficher
                Int_EOS

A macro is also available: Send makes the use of the Set_Value_Mono function
easier.

        Displaying a value on the monochrome screen :

                Send Valeur_A_Afficher,X,Y

The ASCII string can be ended either by $ or the NULL character.
The function also takes into account the back-feed characters (13 and 10).
The Hexadecimal values must not go beyond 32 Bits.

Warning : In order to save time no test is performed at the level of
          the screen's coordinates.

Note : The monochrome screen is automatically cleared at the beginning
       and the end of a program.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Monochrome adapter functions for debugging                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Mono       ณ
ณSet String Monoณ
ณSet Value Mono ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Mono   Force On/Off the display of all the Monochrome Function        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Set_Mono                                                     ณ
ณ        BX = On  Force Monochrome Off                                     ณ
ณ             Off Force Monochrome On                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Mono
            mov bx,On
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet String Mono   Display a string on the Monochrome adapter              ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Set_String_Mono                                              ณ
ณ        BX = Coordonate  X                                                ณ
ณ        CX = Coordonate  Y                                                ณ
ณ       EDX = Address of text ending by $                                  ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_String_Mono
            mov bx,1
            mov cx,10
            mov edx,offset text_mono
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Value Mono   Display A Word in Hexadcimal on the Monochrome adapter  ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Set_Value_Mono                                               ณ
ณ        BX = Coordonate X                                                 ณ
ณ        CX = Coordonate Y                                                 ณ
ณ        EDX = Value to be display                                         ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Value_Mono
            mov bx,1
            mov cx,10
            mov dx,1234h
            Int_EOS


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Keyboard handling                                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Keyboard handling is now child's play thanks to E.O.S. You must take control
of the interrupt 09 as specified bellow :


        To active the keyboard handling :

                mov ah,Use_Int_09
                mov bx,On
                Int_EOS

The keyboard is from then on entirely handled by E.O.S. The old DOS
interrupts are no longer called. As a result the interrupt 16h does work
anymore.

Reading the keyboard is now easy thanks to the Key_Map variable. The latter
is in fact a 128-byte corresponding to the 128 scancodes sent back by the
keyboard.



        To check if the Escape key is currently pressed, for instance :

                cmp Key_Map[Escape],On
                je Escape_Pressed

                ...

        Escape_Pressed:
                mov Key_Map[Escape],Off

A special "All" scancode is used to know if a key has been pressed and then
released.

        To check if the Escape key has been/was pressed :

                cmp Key_Map[All],Escape
                je Escape_Pressed

This enables you to wait for any key :

                @@Wait_a_key:
                cmp Key_Map[All],Off
                je @@Wait_a_key
                mov Key_Map[All],Off

It is obviously possible to desactivate the keyboard and revert to the
previous handler.

        Restoring the keyboard :

                mov ah,Use_Int_09
                mov bx,Off
                Int_EOS

Note: At the end of the program, E.O.S restores all interrupts, restoring
      the interrupt 09 is thus not compulsory.

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณUse Int 09   Use Internal Keyboard handler to use keyboard                ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Use_Int_09                                                   ณ
ณ        BX = On Enable Int 09                                             ณ
ณ           = Off Disable Int 09 (Default setting)                         ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        EAX= Physical address of the key_map array (for watcom users)     ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Use_Int_09
            mov bx,On
            Int_EOS

            ...

@@Pause:                            ; Test if key pressed
            cmp Key_Map[All],Off
            je @@Pause
            mov Key_Map[All],Off

            ...

@@Pause:                            ; Test if the Esc key is pressed
            cmp Key_Map[Escape],On  ; Actually
            jne @@Pause

            ...

@@Pause:                            ; Test if the ESC key have been pressed
            cmp Key_Map[All],Escape
            jne @@Pause


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Constants for Key_Map (AZERTY)
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

            All
            Escape
            Return
            Alt
            Space
            Left
            Right
            Up
            Down
            Plus
            Moins
            Ctrl
            Num_0  to Num_9
            Key_0  to Key_9
            Key_A  to Key_Z
            Key_F1 to Key_F12


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Vertical retrace                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

E.O.S has its own synchronization system.

        To wait for the screen retrace :

                mov ah,Wait_Vbl
                Int_EOS

The use of the interrupt 08 or timer increases the function's capacities.
As for the keyboard interrupt the old handlers are not called.


        To activate the retrace handler :

                mov ah,Use_Int_08
                mov bx,On
                Int_EOS

Warning : When you use Diamond, the Use_Int_08 is automatically activated.
In that case Use_Int_08 is useless.

As a result Wait_Vbl returns the number of frames performed since the last
call.

                mov ah,Wait_Vbl
                Int_EOS
                mov [Nbs_Vbl],eax

Thanks to the use of this interrupt and to the Wait_Vbl function your
program is still able to know the number of lost frames.

You can also directly access to the current frames lost by reading the variable
Nb_Vbl :

                mov eax,[Nb_Vbl]

~v3.05          or with Get_Nb_Vbl function :

~v3.05          mov ah,Get_Nb_Vbl
~v3.05          Int_EOS
~v3.05          mov [Current_Vbl_Lose],eax


The Change_Synchro_Int_08 function changes the frame's rates for the
timer (orginally 70Hz) :

                mov bx,60               ; 60Hz
                mov ah,Change_Synchro_Int_08
                Int_EOS

A macro is also available : Colors temporarily changes a colour in the border


        Colors function :

                colors Numero_de_couleur,Valeur_Rouge,Valeur_Verte,Valeur_bleue


        Example of frame functions :

        @@Boucle:
                colors 0,63,0,0     ; The first colour is brilliant red
                call Procedure_1
                colors 0,0,63,0     ; The second colour is brilliant green
                call Procedure_2
                mov ah,Wait_Vbl
                Int_EOS
        @@Compt:
                add [Valeur_Reguliere],1
                dec eax             ; Regular values are added
                jne @@Compt
                cmp [Key_Map+All],On
                jne @@Boucle


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Synchronization functions                                                บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณWait Vbl             ณ
ณGet_Nb_Vbl           ณ~v3.05
ณUse Int 08           ณ
ณChange Synchro Int 08ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณWait Vbl   Wait the vertical retrace                                      ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       EAX = Number of Vbl lost since the last call                       ณ
ณ             (work only when the Int 08 is on)                            ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Wait_Vbl
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ~v3.05
ณGet Nb Vbl   Return the number of VBL Without waiting the VBL             ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       EAX = Number of Vbl lost since the last call                       ณ
ณ             (work only when the Int 08 is on)                            ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Get_Nb_Vbl
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณUse Int 08   Use Int 08 (IRQ 0) to count frame rate and have a stable     ณ
ณ             vertical retrace                                             ณ
ณ             Defaults frequency is 70Hz                                   ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Use_Int_08                                                   ณ
ณ        BX = On Enable Int 08                                             ณ
ณ           = Off Disable Int 08                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Use_Int_08
            mov bx,On
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณChange Synchro Int 08   Change frequency for Interupt 08                  ณ
ณ                        Defaults frequency is 70Hz                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        BX = frequency                                                    ณ
ณ        AH = Change_Synchro_Int_08                                        ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov bx,70                   ; 70hz
            mov ah,Change_Synchro_Int_08
            Int_EOS


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Variables                                                                บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

E.O.S has some 'global' variables that can be required at any time when
executing a program :


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Code32_Sel
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Code Selector (CS).

        Example : Set new interrupt 70h

                mov ah,Set_Int
                mov bx,70h
                mov cx,[Code32_Sel]         ; Selector
                mov edx,O New_Int_70h       ; Offset of the new routine
                Int_EOS

Warning ! With the protected mode, it is not allowed to do :

                mov cs:[Valeur],10

It would generate an exception and stop your program.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Data32_Sel
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Data selector (DS).

        Example of Data32_Sel use :

                Valeur  dd 0

                mov [Valeur],10

Actually the Code_32_Sel and Data32_Sel selectors are identical. The difference
is to be found in their access. Code32_Sel is read-only whereas
Data32_Sel can be read-and-write.

When starting a program all selectors (except CS) are initialised with the value
of Data32_Sel.

Warning : Under WATCOM, the ES selector points at the PSP program.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Flat_Data_Sel, Flat_Code_Sel
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Those selectors start at the zero address of the memory. They are very useful
to read the BIOS variables. Flat_Data_Sel can be read-and-write, but it cannot
be used as a code segment, whereas Flat_Code_Sel is read-only but can be used
as a code segment.

        Reading the current video mode :

                push es
                mov es,cs:[Flat_Code_Sel]
                mov al,es:[449h]            ; 40h:49h in real mode
                pop es


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ~v3.05
Psp_Sel,Environment_Sel
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Those selectors direclty access to the PSP & environment of the program

        Read current parameters

                push ds
                mov ds,cs:[Psp_Sel]
                movzx ecx,byte ptr ds:[80h]
                mov esi,82
                mov edi,Offset Command_Line
                rep movsb
                pop ds


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Selector 40h
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

This selector directly accesses the BIOS variables :

        Reading the current video mode :

                push es
                mov ax,40h
                mov es,ax
                mov al,es:[49h]             ; 40h:49h in real mode
                pop es


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Real_DS,Real_ES,Real_FS,Real_GS,Real_SS,Real_SP
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Those variables contain the segment values to be proceeded under real mode
(See chapter about Real mode)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
_0b0000h, _0b8000h, _0a0000h
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Those variables contain the various 32 bits addresses of the VRAM.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Macros                                                                   บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Some macros in E.O.S simplify coding.

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro Colors
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                colors Colour_number,Red_Value,Green_Value,Blue_Value

        (See Chapter about vertical retrace)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro Get_Param
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                Get_Param Param_Buffer

                ...

                Param_Buffer db 128 dup (0)

        returns the command-line arguments in Param_Buffer.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro Send
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                Send Value_To_Display,X,Y

        (See monochrome screen adapter)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro DosInt
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                DosInt Interrupt_number

        (See Chapter about Real mode)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro DosCall
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                DosCall Real_mode_addresss

        (See Chapter about Real mode)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro Init_es_di
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                Init_es_di Offset 32_bits_address

        (See Chapter about Real mode)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Macro Init_ds_dx
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

                Init_ds_dx Offset 32_bits_address

        (See Chapter about Real mode)


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Real mode                                                                บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The Real mode is accessible from E.O.S thanks to four macros and six
variables :

        DosInt          macro Int_Number
        DosCALL         macro _Seg_,_Ofs_
        Init_es_di      macro Adrs
        Init_ds_dx      macro Adrs

        Real_GS         :dword
        Real_FS         :dword
        Real_DS         :dword
        Real_ES         :dword
        Real_SS         :dword
        Real_SP         :dword

Under protected mode there are no longer segments but selectors.
The Real_xx variables thus contain the values of the various segments when
calling Real mode functions. E.O.S transfers Real mode ES returned value
through real_ES if it is used by a Dos function.



        Calling an interrupt (Int) from the Real mode :

                DosInt Interrupt number

        Example :

                mov ax,13h                  ; 320x200 256 Colours
                DosInt 10h                  ;
                                            ; Set Video Mode

        Calling a function (Call) under Real mode

                DosCall Real_Mode_Address

        Example :

                XMS_Addrese dw 0,0

                mov ax,4300h                ; this function tests if an
                DosInt 2fh                  ; XMS Driver is available
                cmp al,80h
                je No_XMS_Driver
                mov ax,4310h                ; If there is one it points
                DosInt 2fh                  ; back to the function.
                mov [XMS_Addrese],bx
                mov eax,[Real_ES]
                mov [XMS_Addrese+2],ax
                xor ah,ah                   ; Function 0 of XMS driver
                DosCall Dword Ptr [XMS_Addrese] ; Get XMS Version


        Initialising the variables to be used under Real mode :

                Init_es_di 32bits_Address
                Init_ds_dx 32bits_Address

        Example :

                Vesa_Buffer db 256 dup (0)

                Init_es_di Vesa_Buffer
                mov ax,4f00h                ; tests if a VESA driver
                DosInt 10h                  ; is available

                cmp dword ptr Vesa_Buffer,'ASEV'
                jne no_vesa


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Interrupts                                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

E.O.S modifies the interrupts thanks to the Get_Int and Set_Int functions.


        Example : set new interrupt 70h :

                mov ah,Get_Int              ; reads the current vector
                mov bx,70h
                Int_EOS
                mov [Old_Selector_Int_70h],cx
                mov [Old_Offset_Int_70h],edx
                mov ah,Set_Int
                mov bx,70h
                mov cx,[Code32_Sel]         ; Selector
                mov edx,O New_Int_70h       ; offset of the procedure
                Int_EOS


E.O.S also puts a whole series of functions to the programmer's disposal,
accessible via interrupt 21h.


        Example : displaying a message :

                Msg db 'Hello Word',13,10,36

                mov ah,9                    ; Display String Function
                mov edx,Offset Msg
                int 21h
                mov ax,4c00h
                int 21h

Warning ! To end a program it is imperative to call the function 4ch of the
          interrupt 21h.


All calls to interrupts from the protected mode are automatically transfered
under Real world.

                xor ax,ax
                int 33h

                is equivalent to :

                xor ax,ax
                DosInt 33h


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ IRQs                                                                     บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

All IRQs are accessible in your program. Nevertheless E.O.S had to reprogram
its interrupts to prevent conflicts with the protected mode's exceptions.



        Get_IRQ :

                this function returns the address of an IRQ.

        Set_IRQ :

                this function sets a new IRQ.


        Example :

        Old_IRQ0 Label Fword
        Old_Offset_IRQ0    dd 0
        Old_Selector_IRQ0  dw 0

                mov ah,Get_IRQ
                mov bl,0            ; IRQ timer
                Int_EOS
                mov [Old_Selector_IRQ0],cx
                mov [Old_Offset_IRQ0],edx
                mov ah,Set_IRQ
                mov bl,0            ; IRQ timer
                mov cx,cs
                mov edx,Offset New_IRQ0
                Int_EOS
                ...

        New_IRQ0:
                ...
                jmp fword ptr cs:[Old_IRQ0]


You can also use the Real mode's functions.

                mov ax,2508h        ; sets IRQ timer via Dos
                push cs
                pop ds
                mov edx,O New_IRQ0
                int 21h


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Exceptions                                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Difference between an exception and an interrupt
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

An exception is an interrupt that can be activated within an instruction.
For instance :

        mov ecx,-1
        rep movsb       ; To be taken into account an interrupt waits until
                        ; rep movsb ends


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
If your computer hangs up
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Any exception is handled by E.O.S.

When one of these is generated, E.O.S stops your program and
automatically restores the allocated memory and the original video mode.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ~v3.05
How to set a new exception under E.O.S
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

E.O.S allow now the program to set and get an exception routine with
Get_Exception & Set_Exception function

Exceptions are handled as under DPMI. (see doc on DMPI)



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions for interrupt handling                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฟ
ณGet Intณ
ณSet Intณ
ณGet Irqณ
ณSet Irqณ
ภฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet_Int       Get protected mode interrupt vector                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Int                                                      ณ
ณ        BX = Interrupt number                                             ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ    CX:EDX = Selector:Offset of interrupt                                 ณ
ณ                                                                          ณ
ณAutre Registre Modifie : Aucun                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Get_Int
            mov bx,10h
            Int_EOS
            mov [Old_Int_10_Selector],cx
            mov [Old_Int_10_Offset],edx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet_Int       Set protected mode interrupt vector                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Int                                                      ณ
ณ        BX = Interrupt number                                             ณ
ณ    CX:EDX = Selector:Offset of interrupt                                 ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณAutre Registre Modifie : Aucun                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Int
            mov bx,10h
            mov cx,cs
            mov edx,O New_Int_10
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet_Irq       Get protected mode irq vector                               ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Irq                                                      ณ
ณ        BX = Irq number                                                   ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ    CX:EDX = Selector:Offset of irq                                       ณ
ณ                                                                          ณ
ณAutre Registre Modifie : Aucun                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Get_Irq
            mov bx,1h                               ; Keyboard
            Int_EOS
            mov [Old_Irq_01_Selector],cx
            mov [Old_Irq_01_Offset],edx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet_Irq       Set protected mode irq vector                               ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Irq                                                      ณ
ณ        BX = Irq number                                                   ณ
ณ    CX:EDX = Selector:Offset of irq                                       ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณAutre Registre Modifie : Aucun                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Irq
            mov bx,1h                               ; Keyboard
            mov cx,cs
            mov edx,O New_Irq_01
            Int_EOS

ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป~v3.05
บ                                                                          บ
บ Exceptions functions                                                     บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet Exceptionณ
ณSet Exceptionณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ~v3.05
ณGet_Exception Get protected mode exception vector                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Exception                                                ณ
ณ        BX = Exception number                                             ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ    CX:EDX = Selector:Offset of exception                                 ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Get_Exception
            mov bx,10h
            Int_EOS
            mov [Old_Exception_10_Selector],cx
            mov [Old_Exception_10_Offset],edx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ~v3.05
ณSet_Exception Set protected mode exception vector                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Get_Exception                                                ณ
ณ        BX = Exception number                                             ณ
ณ    CX:EDX = Selector:Offset of exception                                 ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Set_Exception
            mov bx,10h
            mov cx,cs
            mov edx,O New_Exception_10
            Int_EOS



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The linker                                                               บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

E.O.S has a utility (LLINK.EXE) that can create a single executable from
several data files.

        programme.exe
        image.pcx        ---->   final.exe
        musique.mod

Once linked, data files are quickly accessible through the Load_internal_File
function.

        Example of the use of Load_Internal_File and Load_External_File :

                Fichier_Linker  db 'IMAGE.PIC',0
                Fichier_Externe db 'PRG.CFG',0

                mov ah,Load_Internal_File   ; loads an internal file
                mov edx,O Fichier_Linker
                Int_EOS

                There cannot be any mistakes as E.O.S handles them.


                mov ah,Load_External_File   ; loads an external file
                mov edx,O Fichier_Externe
                Int_EOS
                jc Error_Loading

                Handling the user's mistakes.


It only takes to create a link file as seen above, to indicate the list of
files to be linked by LLINK.

        Content of a link file (prg.eos) :

                FINAL.EXE                   ; name of the program to create
                PRG.EXE                     ; name of the program to link
                IMAGE.PCX                   ; data file to link
                MUSIQUE.MOD                 ; data file to link
                :END                        ; end

        Linkage :

                LLINK prg.eos

For easier coding, it is possible to use the Load_Internal_File function
with external files, enabling to link a program when it is completely finished.
(see Example4)


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ 32 bits Debugger                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
DEBUG.OBJ
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

The debbugger DEBUG.OBJ is an external object file that you simply have to
add when linking :

        TLINK eos+my_prog+debug /x /3


To call it from your program a DEBUG function is available. Thus you are able
to activate the debugger through a simple Call it at any time.


Example of a debbugger call under E.O.S :

        Locals
        .386
        CODE32 SEGMENT PUBLIC PARA USE32 'CODE'
        ASSUME  CS:CODE32,DS:CODE32,ES:CODE32

        INCLUDE ..\RESOURCE\EOS.INC

        Msg         db '     Hello world...',13,10,36

        Start32:

            call debug              ; Where you want !!! Alt-x to exit

            mov ah,9
            mov edx,O Msg
            int 21h                 ; Call Display String

            mov ax,4c00h
            int 21h                 ; Exit with Error Code 0

        CODE32 ENDS
        END


Example of a debbugger call under WATCOM :

        void main()
        {
        init_eos(_psp);
        debug();
        printf("     Hello world...\x0D\x0A");
        exit(0);
        }


List of the debbugger's functions :

Pause       Break      calls the debbugger at any time
Alt-X       Exit       exits the debbugger at any time
F1          Mono       the debbugger switches to the monochrome screen
F2          Color      the debbugger switches to the colour screen
F3          Nop        sets NOP instructions in the code window
F4          Here       goes to a specific address
F5          Fpu        changes the Dump window by the arithmetic registers
Alt-F5      UsrScr     displays the program's video screen
F7          Next       traces within procedures
Alt-F7      Int        traces within interrupts
F8          Trace      traces without entering procedures
F9          Run        goes on with the program
F10         BreakPoint sets a breakpoint in the code window
F11         Origin     positions the code window on CS:EIP
F12         About      displays the debbugger's version
Alt         Toggle     changes the registers' window by that of the selectors
Arrows      ScrollDump scrolls the code window
Alt Arrows  ScrollCode scrolls the Dump window
Ctrl Arrows DecalCode  fining
Ctrl N      NewEIP     changes CS:EIP
Ctrl D      NewDump    changes the address of the Dump window
Ctrl G      Goto       goes to a specific address
Ctrl H      Help       displays a help window/screen

Whenever the debbugger comes across an E.O.S, Dos or DPMI interrupt, it
clearly indicates the required function.


Example :
            mov ah,9h
            int 21              = Display String

            mov ax,300h
            int 31h             = Simulate Real Mode Interrupt

            mov ah,47h
            Int_EOS             = Physical Address Mapping


A utility is also provided to configurate the debbugger : EDCONFIG.EXE.
To know more about this type EDCONFIG -h


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
WDEBUG.EXE et UNBIND.EXE
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

You can also use WDEBUG to trace programs with the LE format.

It takes to extract DO4GW from the EXE program with UNBIND.EXE :

  UNBIND fichier.EXE

You can then run the program for the debbugger :

  WDEBUG fichier.LE

To call the debbugger simply press the Pause key.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the 32 bits debbugger                                       บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฟ
ณDebug      ณ
ณDebug Back ณ
ภฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDebug             Initialize and call the debugger                        ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call debug


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDebug_Back        Initialize the debugger for Pause-key and Break_Point   ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call debug_Back


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Appel du debugger par Break point                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฟ
ณBreak Pointณ
ภฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณBreak_Point       call the debugger                                       ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            Break_Point


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Automatic restoration of the original environment                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

It is not necessary to free memory before exiting your program. Whenever it
comes across the 4c00h function or when the computer crashes, E.O.S
automatically restores the original environment :


                 The video mode including VESA modes (132x60, etc...)
                 The clock
                 Interrupts
                 The allocated memory
                 Stops playing the music


It is also possible to restore the original video mode at any time...

                mov ah,Restore_Video_Mode
                Int_EOS


As far as errors are concerned, E.O.S has a special exit that displays error
messages :

                mov ah,Exit_Error
                mov edx,Offset Error_Txt
                Int_EOS


This function is similar to :

                mov ah,9                    ; Fonction Display String
                mov edx,Offset Msg
                int 21h
                mov ax,4c01h
                int 21h


E.O.S can also directly write into video Ram and use colours with the Direct_
Send function :

                lea edx,Message
                mov ah,Direct_Send
                Int_EOS

                ...

Message         db "    ",0,1," Color Blue ",0,4,"Red ",13,10,0,0



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ System functions                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณExit Error                                                                ณ
ณRestore Video Mode                                                        ณ
ณDetect Windows                                                            ณ
ณDirect Send                                                               ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณExit Error   Restore initial Video mode , interrupts , free all reserved  ณ
ณ             memory ,stop music if played and exit (with error code 1)    ณ
ณ             with a error message                                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Exit_Error                                                   ณ
ณ    DS:EDX = Offset message to display                                    ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Exit_Error
            mov edx,Offset Error_Txt
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณRestore Video Mode   Restore the inital video which is be active at the   ณ
ณ                     start of the program                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Restore_Video_Mode                                           ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Restore_Video_Mode
            Int_EOS


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect Windows       Detect If Windows is running                         ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Detect_Windows                                               ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        AL = Windows version                                              ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

Windows_3x          = 3
Windows_95          = 4

            lea edx,Windows_Txt
            mov ah,Detect_Windows
            Int_EOS
            or al,al
            jnz Error

            ...

Windows_Txt         db "     Sorry, but this program can not run under Microsoft Windows (tm)",13,10,36


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDirect Send          Write a text directly to video ram . Color allowed   ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AH = Direct_Send                                                  ณ
ณ       EDX = Offset message to Display                                    ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณComand  : 0,0      = end                                                  ณ
ณ          0,1..255 = color                                                ณ
ณ          13       = first colonne                                        ณ
ณ          10       = next ligne                                           ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

Direct_Send         = 0Eh
If Impossible
            lea edx,Message
            mov ah,Direct_Send
            Int_EOS

            ...

Message             db "    ",0,1," Color Blue ",0,4,"Red ",13,10,0,0


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Developing a library compatible with WATCOM C and E.O.S                  บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

To develop a library compatible with both WATCOM and E.O.S, you have to create
two different object files as described bellow :

                - <Nom>.obj    : VESA.OBJ   (E.O.S)
                - W<Nom>.obj   : WVESA.OBJ  (WATCOM)


For that purpose, you can define the variable in your makefile, for instance
__Use_Watcom__ :

PRG  = VESA
RES  = ..\RESOURCE

$(PRG).exe:       $(PRG).obj
        @Echo $(PRG) Has Been Assembled

$(PRG).obj: $(PRG).asm
        @tasm $(PRG) $(RES)\$(PRG) /m /q /p /d__Use_Watcom__=0
        @tasm $(PRG) $(RES)\W$(PRG) /m /q /p /d__Use_Watcom__=1


From this variable you can then handle two codes in your source file :


        If __Use_Watom__
          ...                   ; appropriate CODE for WATCON
          ...
        Else
          ...                   ; appropriate CODE for E.O.S
          ...
        EndIF


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Differences between an E.O.S and WATSON program                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Memory managing under WATCOM
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Under WATCOM, memory is of the FLAT type and starts at the 0 address.
Under E.O.S, memory is defined depending on where the program was loaded.



         To allocate memory under E.O.S :

                mov ah,Allocate_Memory_Handle
                mov edx,Taille
                Int_EOS
                mov [Adresse_Memoire],edx
                mov [Handle_Memoire],edi


         To allocate memory under WATCOM :

                mov ah,Allocate_Memory_Handle
                mov edx,Taille
                Int_EOS
                mov [Adresse_Memoire],eax
                mov [Handle_Memoire],edi


         Example to use both :

                mov ah,Allocate_Memory_Handle
                mov edx,Taille
                Int_EOS
        If __Use_Watom__
                mov [Adresse_Memoire],eax
        Else
                mov [Adresse_Memoire],edx
        Endif
                mov [Handle_Memoire],edi

         !!! Ditto for Load_Internal_file and Load_External_File !!!


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Calling interrupts from the Real mode
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

         Under E.O.S :

                Init_es_edi Buffer_Vesa
                mov ax,4f00h
                DosInt 10h


         Under WATCOM :

               Variables cannot be addressed directly nor init_DS_Dx macros
               used, for the program is loaded above the first Mega
               octet and those variables cannot be reached by Dos.
               It is therefore advised to allocate memory with the 48h function
               of the 21h interrupt in order to link the real mode with the
               protected mode.


                xor eax,eax
                mov ah,48h
                mov bx,256/16
                DosInt 21h
                mov edi,O DPMI_CALL
                mov W [edi.Real_mode_Call._EAX],4f00h
                mov [edi.Real_mode_Call._EDI],0h
                mov [edi.Real_mode_Call._ES],ax
                mov ax,300h
                mov bl,10h                      ; Int 10h
                xor cx,cx
                int 31h                         ; emulates an interrupt

         Use the following structure for DPMI calls :

                Real_mode_Call STRUC
                _EDI        dd ?
                _ESI        dd ?
                _EBP        dd ?
                            dd ?
                _EBX        dd ?
                _EDX        dd ?
                _ECX        dd ?
                _EAX        dd ?
                _flags      dw ?
                _ES         dw ?
                _DS         dw ?
                _FS         dw ?
                _GS         dw ?
                _IP         dw ?
                _CS         dw ?
                _SP         dw ?
                _SS         dw ?
                            ends

                DPMI_CALL   Real_mode_Call <>


         To facilitate the creation of programs you ought to allocate memory
         thanks to Dos functions to have few different source codes.


         Example :

           If __Use_Watcom__
                            mov edi,O DPMI_CALL
                            mov W [edi.Real_mode_Call._EAX],4800h
                            mov W [edi.Real_mode_Call._EBX],512/16
                            mov ax,300h
                            mov bl,10h
                            xor cx,cx
                            int 31h
                            jc  Error_vesa
                            mov edi,O DPMI_CALL
                            movzx eax,W [edi.Real_mode_Call._EAX]
           Else
                            xor eax,eax
                            mov ah,48h
                            mov bx,512/16
                            Dosint 21h
                            jnz Error_vesa
           Endif

@@cont:
            mov [Seg_Buffer_Vesa],eax
            shl eax,4
            sub eax,[Code32_Addr]
            mov [Addr_Buffer_Vesa],eax

           If __Use_Watcom__
                            mov edi,O DPMI_CALL
                            mov W [edi.Real_mode_Call._EAX],4f00h
                            mov [edi.Real_mode_Call._EDI],0h
                            mov eax,[Seg_Buffer_Vesa]
                            mov [edi.Real_mode_Call._ES],ax
                            mov ax,300h
                            mov bl,10h
                            xor cx,cx
                            int 31h
                            jc  Error_vesa
           Else
                            mov eax,[Seg_Buffer_Vesa]
                            mov [Real_ES],eax
                            xor edi,edi
                            mov ax,4f00h
                            DosInt 10h
                            cmp ax,004fh
                            jne Error_vesa
           Endif

            mov edi,[Addr_Buffer_Vesa]
            cmp D [edi],'ASEV'
            jnz Error_vesa


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Useless variables under WATCOM
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

         Real_DS
         Real_ES
         Real_FS
         Real_GS
         Real_SS
         Real_SS

         as previously explained


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Differences between source files
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

      Under E.O.S

         An E.O.S program must begin with the label START32.



     Under WATCOM

         A program can begin anywhere, provided the program ends with the
         END <Label> command.

         It is compulsory to call the Init_EOS procedure that emulates the
         E.O.S variables as soon as possible in the program.

         The ES selector points at the program's PSP.


     Example of a WATCOM program with  assembler :

        Locals
        .386
        CODE32 SEGMENT PUBLIC PARA USE32 'CODE'
        ASSUME  CS:CODE32,DS:CODE32,ES:CODE32

        INCLUDE ..\RESOURCE\EOS.INC

        Msg_Hello db 'Hello World ...',13,10,36

        .code

         Start32:
                mov ebx,es              ; These instructions must be first
                call Init_EOS           ; executed to enable all EOS functions
                push ds                 ;
                pop es                  ;

                mov ah,9
                mov edx,O Msg_Hello
                int 21h
                mov ax,4c00h
                int 21h

        CODE32 ENDS
               END Start32


     Example of a WATCOM program with C :

        void main()
        {
                call Init_EOS(_psp);
                printf("     Hello world...\x0D\x0A");
                exit(0);
        }

ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป~v3.05
บ                                                                          บ
บ About Windows NT                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

From the 3.05 version onwards the EOS can work under Windows NT, thanks to
changes made within the system. Consequently some variables provided by the
EOS have become incompatible with Windows NT. New variables have been added
to make the source code compatible with Windows NT.

                Dos/Windows95           Dos/Windows95/Windows NT

                PSP_Addr                PSP_Sel
                Environment_Addr        Environement_Sel
                Zero_Addr               Flat_Data_Sel


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ E.O.S libraries                                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Contrary to the E.O.S functions, calling the libraries' functions is no longer
made through the Int_EOS interrupt but through simple Call.


Example :
            mov eax,Mode640x480x256
            call Init_Vesa
            jc Error_Vesa


List of available functions :


DEBUG.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDebug                                                                     ณ
ณDebug Back                                                                ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

VESA.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Vesa                                                                 ณ
ณInit Vesa2                                                                ณ
ณInit Vesa Bank                                                            ณ
ณClose Vesa Bank                                                           ณ
ณSet Bank                                                                  ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

FLI32.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Fli                                                                  ณ
ณLoad Internal Fli                                                         ณ
ณDispose Fli                                                               ณ
ณFirst Frame Fli                                                           ณ
ณNext Frame Fli                                                            ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

SNAP.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Snap                                                                 ณ
ณSnap IFF                                                                  ณ
ณSave IFF                                                                  ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

JOYSTICK.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Joystick                                                             ณ
ณDectect Joystick                                                          ณ
ณAdd Joystick                                                              ณ
ณUpdate Joystick                                                           ณ
ณSub Joystick                                                              ณ
ณUpper Left                                                                ณ
ณLower Right                                                               ณ
ณCenter                                                                    ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

MEMORY.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Memory                                                               ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

RS232.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSerial Open                                                               ณ
ณSerial Close                                                              ณ
ณSerial Read                                                               ณ
ณSerial Read Block                                                         ณ
ณSerial Write                                                              ณ
ณSerial Write Block                                                        ณ
ณSerial Clear Buffer                                                       ณ
ณSerial Status                                                             ณ
ณSerial Set Dtr                                                            ณ
ณSerial Reset Dtr                                                          ณ
ณSerial Set Rts                                                            ณ
ณSerial Reset Rts                                                          ณ
ณSerial Stand By                                                           ณ
ณSerial Buffer Full                                                        ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

CDROM.OBJ
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect CDROM                                                              ณ
ณOpen CDROM                                                                ณ
ณClose CDROM                                                               ณ
ณPlay Track                                                                ณ
ณStop CDROM                                                                ณ
ณResume CDROM                                                              ณ
ณGet Nb Tracks                                                             ณ
ณGet Track Info                                                            ณ
ณGet Current Track Info                                                    ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ VESA Libraries                                                           บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Automatic Bank Switching under VESA 1.0 or 2.0
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Thanks to the VESA library there is no need to bother about automatic bank
switching under VESA 1.0. You can directly read or write into the video buffer
as described bellow :

Example :

            call Init_Vesa_Bank         ; sets up automatic bank commuting
            jc Error_Sel

            mov es,bx                   ; sets ES:EDI on the video buffer
            xor edi,edi

            mov esi,[Addr_Pic]          ; sets DE:ESI on Addr_Pic

            xor edx,edx
            call Set_Bank               ; selects the first bank

            mov ecx,640*(480/4)
            rep movsd                   ; automatically commutes the other
                                        ; banks

Explanation :

In principle you are compelled to commute the banks manually to access the
entire video RAM :


            mov esi,Adresse_de_mon_image

            mov edx,0
            call set_bank
            mov ecx,64k
            mov edi,0
            rep movsd

            mov edx,1
            call set_bank
            mov ecx,64k
            mov edi,0
            rep movsd

            etc..

This can be processed with E.O.S and is easy to make for a picture.
On the other hand it is much more difficult with sprites moving on the screen,
for changing banks can occur at any time. For each pixel a test must be done,
which prevents the use of instruction like resp movsd. Needless to say it is
also very slow. With the E.O.S automatic bank switching you only have to specify
the first bank. When a bank change is to take place, e.g. in the midst of an
rep movsd instruction, E.O.S commutes the next bank and adjust the EDI register,
the instruction can then go on. This device is extremely quick and enables the
programer to work with a linear memory and no test at all to change banks.



Warning !

The EDI value in the next procedure is not equal to 65535+4 but to 00000+3.


            ...
            mov edi,65535
            stosd
            ...                 ; EDI = 3 !!!


When E.O.S changes banks, it also changes the EDI value :

            00000 Bank 1
            65535           ; edi=65535, bank= 1
            65536 Bank 2    ; edi=00000, bank= 2


Limitation : When reading only the Lodsb, Lodsw and Lodsd instructions are
supported.

You must abide by the four following rules for the commuting system to work
properly :

            1 - Set the first bank manually.
            2 - Write in the video buffer from top to bottom.
            3 - Consider the fact that E.O.S can modify EDI or ESI.
                EDI ou ESI.
            4 - Only use Lodsb, Lodsw and Lodsd to write in the video buffer.
                le buffer vido.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Linear Frame Buffer under VESA 2.0
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Under VESA 2.0, E.O.S can have access to a virtual linear buffer that directly
corresponds to the memory of your graphic card. When you write into this buffer
the information is written on the spot in the video card's RAM by memory
mapping. The virtual video buffer does not use the RAM, as it is the direct
image of the video memory.


Example :

            mov eax,Mode640x480x256 ; Init SVGA Mode
            mov ecx,640*480         ; Linear Buffer Size
            call Init_Vesa2
            jc Error_Vesa
            mov [Buffer],eax        ; Linear Buffer Address

            ...

            mov edi,[Buffer]
            mov ecx,(640/4)*480
            rep movsd


This device is much more convenient than bank commuting, for the processor's
registers are not modified. Unfortunately a recent video card is required by
this system, since the Linear Frame Buffer is made by the hardware.



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the VESA library                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Vesa      ณ
ณInit Vesa2     ณ
ณInit Vesa Bank ณ
ณClose Vesa Bankณ
ณSet Bank       ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Vesa   Initialize A Vesa 1.x or 2.0 to use automatic bank switching  ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        EAX = Vesa mode                                                   ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        EAX = VRAM address                                                ณ
ณ                                                                          ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Mode Vesa not supported or Vesa driver not found             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov eax,Mode640x480x256
            call Init_Vesa
            jc Error_Vesa

            ...

Vesa_Txt            db '     Mode SVGA not supported or VESA not found !',13,10
                    db '      To install a vesa driver, refer to your video card documentation.',13,10,36


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Vesa2  Initialize A Vesa 2.0 to use linear frame buffer              ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        EAX = Vesa mode                                                   ณ
ณ        ECX = Video buffer size                                           ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        EAX = Linear buffer address                                       ณ
ณ                                                                          ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Mode Vesa not supported or Vesa driver not found             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov eax,Mode640x480x256
            mov ecx,640*480
            call Init_Vesa2
            jc Error_Vesa
            mov [Screen],eax

            ...

Vesa_Txt            db '     Mode SVGA not supported or VESA not found !',13,10
                    db '      To install a vesa driver, refer to your video card documentation.',13,10,36


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Vesa Bank   Init the Automatic Bank Switching                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       BX = New selector for addressing the video ram                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Can't allocate selector                                      ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Init_Vesa_Bank
            jc Error_Sel
            mov [screen_selector],bx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณClose Vesa Bank  Close the Automatic Bank Switching                       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Close_Vesa_Bank


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSet Bank         Select the first Bank                                    ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov edx,edi     ; EDI Address of first pixel to be displayed
            shr edx,16
            call Set_Bank
            and edi,0ffffh


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Variables of the VESA library                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณVesa Clear Palette   ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณVesa Clear Palette   Toggle clear palette on/off                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov vesa_clear_palette,off  ; Default = On
            call Init_Vesa_Bank
            jc Error_Sel
            mov [screen_selector],bx


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Constants of the VESA library                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
VBE v1.0
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Mode640x400x256             = 100h
Mode640x480x256             = 101h
Mode800x600x16              = 102h
Mode800x600x256             = 103h
Mode1024x768x16             = 104h
Mode1024x768x256            = 105h
Mode1280x1024x16            = 106h
Mode1280x1024x256           = 107h
Mode80x60                   = 108h
Mode132x25                  = 109h
Mode132x43                  = 10ah
Mode132x60                  = 10bh
Mode132x60                  = 10ch


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
VBE v1.2+
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

Mode320x200x32k             = 10dh
Mode320x200x64k             = 10eh
Mode320x200x16M             = 10fh
Mode640x480x32k             = 110h
Mode640x480x64k             = 111h
Mode640x480x16M             = 112h
Mode800x600x32k             = 113h
Mode800x600x64k             = 114h
Mode800x600x16M             = 115h
Mode1024x768x32k            = 116h
Mode1024x768x64k            = 117h
Mode1024x768x16M            = 118h
Mode1280x1024x32k           = 119h
Mode1280x1024x64k           = 11ah
Mode1280x1024x16M           = 11bh


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The FLI32 library                                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

With this library you can use FLI or FLC files in your programs.



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the FLI32 library                                           บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Fli         ณ
ณLoad Internal Fliณ
ณFirst Frame Fli  ณ
ณNext Frame Fli   ณ
ณDispose Fli      ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPlay a FLI/FLC files                                                      ณ
ณ                                                                          ณ
ณFunctions :                                                               ณ
ณ                                                                          ณ
ณ        Load_Fli          Load a FLI into the memory                      ณ
ณ                          Initialize if needed the track-disk mode        ณ
ณ                          Check the header                                ณ
ณ                                                                          ณ
ณ        Load_Internal_Fli Load a FLI which is linked with LLINK           ณ
ณ                          Check the header                                ณ
ณ                                                                          ณ
ณ        First_Frame_Fli   Uncompress the first frame                      ณ
ณ                                                                          ณ
ณ        Next_Frame_Fli    Uncompress the next frame                       ณ
ณ                                                                          ณ
ณ        Dispose_Fli       Freeing memory                                  ณ
ณ                          Close File                                      ณ
ณ                                                                          ณ
ณInformation During playing :                                              ณ
ณ                                                                          ณ
ณ        Fli_Err       = 1 - Chunk not found                               ณ
ณ                        2 - Out of memory                                 ณ
ณ                        3 - File error                                    ณ
ณ                        4 - Bad FLC header                                ณ
ณ                        5 - Size max for FLC : 640x480                    ณ
ณ                                                                          ณ
ณ        Fli_Swap      = On - Track disk running -  not enough memory to   ณ
ณ                             load the file                                ณ
ณ                        Off- File has been loaded into memory             ณ
ณ                                                                          ณ
ณ        Fli_Svga      = On - Number of Lines >200                         ณ
ณ                                                                          ณ
ณ        Fli_Delay     = Fli speed                                         ณ
ณ                                                                          ณ
ณ        Fli_Last_Frame= On - Last frame (Mode No looping)                 ณ
ณ                                                                          ณ
ณ        Fli_Current_Frame = Current frame                                 ณ
ณ                                                                          ณ
ณCommands :                                                                ณ
ณ                                                                          ณ
ณ        Fli_Selector  = Screen selector                                   ณ
ณ                                                                          ณ
ณ        Fli_ReStart   = On - Restart at the begining of the animation     ณ
ณ                                                                          ณ
ณ        Fli_Loop      = On - Restart the FLI at the end (Defaults)        ณ
ณ                        Off- Stop at the end  (Mode No looping)           ณ
ณ                                                                          ณ
ณ        Fli_TrackDisk = On - Enable Track-Disk mode                       ณ
ณ                        Off- Track-Disk not use except when the FLI can't ณ
ณ                             be loaded into the memory                    ณ
ณ                                                                          ณ
ณ        Fli_Buffer    = Logical address of FLI buffer                     ณ
ณ                                                                          ณ
ณ        Fli_Ligne_Shl = 6 for  320 per line                               ณ
ณ                        7 for  640 per line                               ณ
ณ                                                                          ณ
ณ        Fli_Scr_X     = Number of pixels per line                         ณ
ณ        Fli_Scr_Y     = Number of lines                                   ณ
ณ                                                                          ณ
ณ        Fli_Decal_X   = Number of pixels per line                         ณ
ณ        Fli_Decal_Y   = Number of lines                                   ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
           mov edx, offset Fli_Path
         call Load_Fli
        jc Fli_Error

            cmp Fli_Svga,On
            je  @@Init_Svga
            jne @@Init_Vga

            ...

            mov Fli_Selector,[screen_selector]

            call First_Frame_Fli
            jc Fli_Error

@@again:
            mov ah,Wait_Vbl
            Int_EOS

            call Next_Frame_Fli
            jc Fli_Error

            cmp Key_Map[Escape],On
            jne @@again


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The SNAP library                                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

With this library you can create IFF hard-copies of VESA screens by pressing
the Scroll_lock key.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the SNAP library                                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฟ
ณInit Snapณ
ณSnap IFF ณ
ณSave IFF ณ
ภฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Snap   Initialize the screen grabber . (You can change the int 09    ณ
ณ            function Use_Int_09 after this Init                           ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ah,Use_Int_09
            mov bx,On
            Int_EOS

            call Init_Snap


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSnap IFF    Grab the current Screen from Video RAM                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Snap_IFF


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSave IFF    Save a buffer to IFF                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AX = Screen Size X                                                ณ
ณ        BX = Screen Size Y                                                ณ
ณ       EDX = Offset of File Name                                          ณ
ณ       ESI = Address to save in IFF                                       ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ax,640
            mov bx,480
            mov edx,O File_Name
            mov esi,Buffer
            call Save_IFF


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The JOYSTICK library                                                     บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

This library handles joysticks.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the JOYSTICK library                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Joystick   ณ
ณDectect Joystickณ
ณAdd Joystick    ณ
ณUpdate Joystick ณ
ณSub Joystick    ณ
ณUpper Left      ณ
ณLower Right     ณ
ณCenter          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit_Joystick  Initialize all port                                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Init_Joystick


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect_Joystick  Find if an analogic joystick is plug in port 1 ,2 or Bothณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       EAX = 1 A joystick is plugged in port 1                            ณ
ณ             2 A joystick is plugged in port 2                            ณ
ณ             3 2 joystick is plugged in port 1 and 2                      ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Joystick                                                  ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Detect_Joystick
            test eax,Analog_A
            je @@Ok1
            ...
@@Ok1:
            test eax,Analog_B
            je @@Ok3
            ...
@@Ok3:


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณAdd_Joystick   Add a new joystick to be used by the library               ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ        AX = Type Of joystick                                             ณ
ณ             Analog_A                                                     ณ
ณ             Analog_B                                                     ณ
ณ             Lpt_A                                                        ณ
ณ             Lpt_B                                                        ณ
ณ        BX = Address of port                                              ณ
ณ           = 1 Lpt1                                                       ณ
ณ           = 2 Lpt2                                                       ณ
ณ           = 3 Lpt3                                                       ณ
ณ           = 4 Lpt4                                                       ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       ESI = Address of structure of joystick                             ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Joystick Available                                        ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ax,Analog_A
            call Add_Joystick
            jc No_Joystick_Available


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณUpdate_Joystick  Must be called often to update all structure of all      ณ
ณ                 Joystick                                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Update_Joystick


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSub_Joystick   Delete a Joystick created by Add_Joystick                  ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       ESI = Address of structure to be deleted                           ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Structure not found                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov esi,[Addr_Joy1]
            call Sub_Joystick
            jc Structure_Not_Found


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณUpper_Left     Take Value For Upper Left Joystick's Coordinates           ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       ESI = Address of structure                                         ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Fire Press                                                ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

@@Loop:
            mov esi,[Addr_Joy1]
            call Upper_Left
            jc @@Loop


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLower_Right    Take Value For Lower Right Joystick's Coordinates          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       ESI = Address of structure                                         ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Fire Press                                                ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

@@Loop:
            mov esi,[Addr_Joy1]
            call Lower_Right
            jc @@Loop


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณCenter         Take Value For Center Joystick's Coordinates               ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       ESI = Address of structure                                         ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             No Fire Press                                                ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

@@Loop:
            mov esi,[Addr_Joy1]
            call Center
            jc @@Loop


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The constants of the JOYSTICK library                                    บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Analog_A        = 1h
Analog_B        = 2h
Lpt_A           = 10h
Lpt_B           = 20h

Lpt1            = 1h
Lpt2            = 2h
Lpt3            = 3h
Lpt4            = 4h

Joy             Struc
J_Type          dw 0
J_Addr          dw 0
J_Min_X         dw 0
J_Max_X         dw 0
J_Min_Y         dw 0
J_Max_Y         dw 0
J_Center_X      dw 0
J_Center_Y      dw 0
J_Left          db 0
J_Right         db 0
J_Up            db 0
J_Down          db 0
J_Fire1         db 0
J_Fire2         db 0
J_Fire3         db 0
J_Fire4         db 0
Joy             ends


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The memory library                                                       บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

This library displays the available memory in real time on the monochrome
screen.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the memory library                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit Memoryณ
ภฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณInit_Memory    Turn the display memory on                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Init_Memory


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The RS232 library                                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

With this library two computers can be connected at 115200 bauds with a NULL
MODEM cable.

ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the RS232 library                                           บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณSerial Open        ณ
ณSerial Close       ณ
ณSerial Read        ณ
ณSerial Read Block  ณ
ณSerial Write       ณ
ณSerial Write Block ณ
ณSerial Clear Bufferณ
ณSerial Status      ณ
ณSerial Set Dtr     ณ
ณSerial Reset Dtr   ณ
ณSerial Set Rts     ณ
ณSerial Reset Rts   ณ
ณSerial Stand By    ณ
ณSerial Buffer Full ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Open         This function sets the serial port up.               ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       EDX = base port address                                            ณ
ณ       EAX = speed                                                        ณ
ณ       ECX = config                                                       ณ
ณ       EDI = buffer size                                                  ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ       EAX = Circular buffer adrs                                         ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Not Enough Memory                                            ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov edx,COM_1
            mov eax,SER_BAUD_115200
            mov ecx,SER_PARITY_NONE
            or  ecx,SER_BITS_8
            or  ecx,SER_STOP_1
            mov edi,1024
            call Serial_Open
            jc @@not_enough_memory


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Close       This procedure closes the serial port.                ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Close


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Read        This procedure read a character in the circular bufferณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       al : char                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :

@@wait:
            cmp Serial_Stand_By,0
            je @@wait
            call Serial_Read


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Read_Block                                                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       EDI = Buffer adrs                                                  ณ
ณ       ECX = Nbs char to read                                             ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ecx,10
            lea edi,[Buffer]
            call Serial_Read_Block


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Write       This procedure sends characters.                      ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       bl  = char to write                                                ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Error To Write                                               ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov bl,'a'
            call Serial_Write
            jc @@error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Write_Block                                                       ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       ESI = Buffer adrs                                                  ณ
ณ       ECX = Nbs char to write                                            ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ        Carry = 0                                                         ณ
ณ             All Done                                                     ณ
ณ                                                                          ณ
ณ        Carry = 1                                                         ณ
ณ             Error To Write                                               ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov ecx,10
            lea esi,[Buffer_To_Send]
            call Serial_Write_Block
            jc @@error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Clear_Buffer This procedure clears the circular buffer.           ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Clear_Buffer


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Status      This procedure displays the status of the modem.      ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       al = status                                                        ณ
ณ                                                                          ณ
ณ         7    6     5     4      3     2      1      0                    ณ
ณ     ฺฤฤฤฤฤยฤฤฤฤยฤฤฤฤฤยฤฤฤฤฤยฤฤฤฤฤฤยฤฤฤฤฤยฤฤฤฤฤฤยฤฤฤฤฤฤฟ                  ณ
ณ     ณ DCD ณ RI ณ DSR ณ CTS ณ dDCD ณ dRI ณ dDSR ณ dCTS ณ                  ณ
ณ     ภฤฤฤฤฤมฤฤฤฤมฤฤฤฤฤมฤฤฤฤฤมฤฤฤฤฤฤมฤฤฤฤฤมฤฤฤฤฤฤมฤฤฤฤฤฤู                  ณ
ณ                                                                          ณ
ณ     Bit 0 (dCTS): Change in CTS                                          ณ
ณ     Bit 1 (dDSR): Change in DSR                                          ณ
ณ     Bit 2 (dRI): Change in RI                                            ณ
ณ     Bit 3 (dDCD): Change in DCD                                          ณ
ณ     Bit 4 (CTS): Clear To Send. Modem sets this line indicating that     ณ
ณ             it is ready for data, after computer indicates that it       ณ
ณ             is ready for data with an RTS. It used to be a signal        ณ
ณ             that the local modem has connected with a remote modem       ณ
ณ             too, in the olden days.                                      ณ
ณ     Bit 5 (DSR): Data Set Ready. This is the completing signal in a      ณ
ณ             DTR-DSR pair. Computer sends DTR to modem, saying it         ณ
ณ             wants to connect with it. Modem sends DSR back to            ณ
ณ             computer, saying that connection has been established.       ณ
ณ     Bit 6 (RI): Ring Indicator. Indicates that there is remote modem     ณ
ณ             attempting to call your local modem.                         ณ
ณ     Bit 7 (DCD): Data Carrier Detect. Indicates that the remote          ณ
ณ             modem has established connection with local modem.           ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Status


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Set_Dtr     sets the DTR bit to 1                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Set_Dtr


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Reset_Dtr   sets the DTR bit to 0                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Reset_Dtr


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Set_Rts     sets the RTS bit to 1                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Set_Rts


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณ Serial_Reset_Rts   sets the RTS bit to 0                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            call Serial_Reset_Rts


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The constants of the RS232 library                                       บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

COM_1               =       3F8h    ; base port address of port 0
COM_2               =       2F8h    ; base port address of port 1

SER_BAUD_300        =       384     ;    300 bauds
SER_BAUD_1200       =       96      ;   1200 bauds
SER_BAUD_2400       =       48      ;   2400 bauds
SER_BAUD_4800       =       24      ;   4800 bauds
SER_BAUD_9600       =       12      ;   9600 bauds
SER_BAUD_14400      =       8       ;  14400 bauds
SER_BAUD_19200      =       6       ;  19200 bauds
SER_BAUD_28800      =       4       ;  28800 bauds
SER_BAUD_38400      =       3       ;  38400 bauds
SER_BAUD_57600      =       2       ;  57600 bauds
SER_BAUD_115200     =       1       ; 115200 bauds

SER_STOP_1          =       0       ; 1 stop bit per character
SER_STOP_2          =       4       ; 2 stop bits per character

SER_BITS_5          =       0       ; send 5 bit characters
SER_BITS_6          =       1       ; send 6 bit characters
SER_BITS_7          =       2       ; send 7 bit characters
SER_BITS_8          =       3       ; send 8 bit characters

SER_PARITY_NONE     =       0       ; no parity
SER_PARITY_ODD      =       8       ; odd parity
SER_PARITY_EVEN     =       24      ; even parity


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The CDROM library                                                        บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

With this library you can play a CD.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Functions of the CDROM library                                           บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect CDROM          ณ
ณOpen CDROM            ณ
ณClose CDROM           ณ
ณPlay Track            ณ
ณStop CDROM            ณ
ณResume CDROM          ณ
ณGet Nb Tracks         ณ
ณGet Track Info        ณ
ณGet Current Track Infoณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณDetect CDROM  Detect is a cdrom is connected to the system using the      ณ
ณ              MSCDEX functions                                            ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ        BX = Number of CDROM present                                      ณ
ณ        CX = Drive of the First CDROM                                     ณ
ณ        DX = MSCDEX version                                               ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 No CDROM detected                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Detect_CDROM
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณOpen CDROM   Open the CDROM door                                          ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Open_CDROM
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณClose CDROM   Close the CDROM door                                        ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Close_CDROM
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPlay Track    Play a track from the CDROM                                 ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณ       EAX = Track number                                                 ณ
ณ       EBX = 0 this track only                                            ณ
ณ             1 all tracks follow                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on playing                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                mov eax,1       ; play all
                mov ebx,1
                call Play_Track
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณStop CDROM stop the music from the CDROM                                  ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Stop_CDROM
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณResume CDROM  Resume the music from the CDROM                             ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Resume_CDROM
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet Nb Tracks Get the number of Tracks in the CDROM                       ณ
ณ              (Will also reload all the database all track a bit slow)    ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ       EBX = Number of Track                                              ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Get_Nb_Track
                jc Error
                mov Nb_Track,ebx


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet Track Info  Get the Track info on the CDROM                           ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       EAX = Track number                                                 ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                mov eax,1       ; first track
                call Get_Track_Info
                jc Error


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณGet Current Track Info  Get the current Track info on the CDROM           ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = 0                                                            ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ       EAX = 1 Error on command                                           ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
                call Get_Current_Track_Info
                jc Error
                lea esi,Track_Info
                mov al,[esi._Track_Info._track] ; current track



ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Accessing the different variables of a CD-ROM                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

_Track_Info Struc
_adr        db 0
_track      db 0
_index      db 0
_min        db 0
_sec        db 0
_frame      db 0
_zero       db 0
_amin       db 0
_asec       db 0
_aframe     db 0
            ends

Track_Info      : _Track_Info
Track_Nbs       : dword
First_CDROM     : word
Number_CDROM    : word
Version_MSCDEX  : word


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The libraries of the E.O.S users                                         บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

List of available functions :

WC_FONT by Thomas Mangin
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณPrint Screen Size                                                         ณ
ณPrint Vesa Version                                                        ณ
ณPrint Vesa Memory                                                         ณ
ณPrint Goto X                                                              ณ
ณPrint Goto Y                                                              ณ
ณPrint Goto XY                                                             ณ
ณPrint Color                                                               ณ
ณPrint Char                                                                ณ
ณPrint Text                                                                ณ
ณPrint Hex                                                                 ณ
ณPrint Dec                                                                 ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู


GIF.OBJ by Thomas Bernard
ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad External Gif Handle                                                  ณ
ณLoad Internal Gif Handle                                                  ณ
ณGif Handle                                                                ณ
ณGif Y                                                                     ณ
ณGif X                                                                     ณ
ณGif Palette                                                               ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู





ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป~v3.05
บ                                                                          บ
บ The Freddy Vtl's USM library                                          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

This sound library is able to play MOD XM & STM on Sound Blaster and
Gravis Ultrasound sound card.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป~v3.05
บ                                                                          บ
บ Functions of the Freddy Vtl's USM library                             บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

For more information about this library read the documentation in the EX_USM
directory.

Please note it is a light version of the USM. To get the full version read
the USMPE.DOC file.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Thomas Mangin's FONT library                                             บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณprint_screen_size : set the screen size. Needed before any 'drawing' call ณ
ณprint_vesa_version: to allow me to do a bank switch in vesa 1.0           ณ
ณprint_vesa_memory : set the vesa memory for vesa 2.0 only                 ณ
ณprint_goto_x      : change the 'cursor' position                          ณ
ณprint_goto_y                                                              ณ
ณprint_goto_xy                                                             ณ
ณprint_color       : change the text color                                 ณ
ณprint_char        : print a char at setted position and goto next positionณ
ณprint_text        : print a ASCIIZ string                                 ณ
ณprint_hex         : print a number in hexa with minimum x character       ณ
ณprint_dec         : print a number in hexa with minimum x character       ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Thomas Bernard's GIF library                                             บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

This library loads a GIF compressed file.


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ The functions of Thomas Bernard's GIF library                            บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad External Gif Handleณ
ณLoad Internal Gif Handleณ
ณGif Handle              ณ
ณGif Y                   ณ
ณGif X                   ณ
ณGif Palette             ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad External Gif Handle   Load and uncompress an external GIF file.      ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       Carry = 0                                                          ณ
ณ        All done                                                          ณ
ณ       EAX = Logical (tasm) or physical (watcom) address of buffer        ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณ       Carry = 1                                                          ณ
ณ        Error                                                             ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Example :
            mov edx,O File_name
            Call Load_External_Gif_Handle
            jc Error_File
            mov [File_Buffer],eax
            mov [Handle_Memory],edi


ฺฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฟ
ณLoad Internal Gif Handle   Load and uncompress an internal GIF file.      ณ
ณ                                                                          ณ
ณIn :                                                                      ณ
ณ       EDX = Offset of file name                                          ณ
ณ                                                                          ณ
ณOut :                                                                     ณ
ณ       EAX = Logical (tasm) or physical (watcom) address of buffer        ณ
ณ       EDI = Handle of Memory                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ณOther Registers Change : None                                             ณ
ณ                                                                          ณ
ณ                                                                          ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู

Exemple :
            mov edx,O File_name
            Call Load_Internal_Gif_Handle
            mov [File_Buffer],eax
            mov [Handle_Memory],edi


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ DPMI functions (interrupt 31h) supported by E.O.S with WEOS.EXE          บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

The following DPMI functions are only accessible for programers using the
WEOS.EXE, WEOSLITE.EXE or WDEBUG.EXE versions, i.e. WATCOM programers (C++ or
Assembler).


Function 0000h - Allocate LDT Descriptors
Function 0001h - Free LDT Descriptor
Function 0002h - Segment to Descriptor
Function 0003h - Get Next Selector Increment Value
Function 0006h - Get Segment Base Address
Function 0007h - Set Segment Base Address
Function 0008h - Set Segment Limit
Function 0009h - Set Descriptor Access Rights
Function 000Ah - Create Code Segment Alias Descriptor
Function 000Bh - Get Descriptor
Function 000Ch - Set Descriptor
Function 0100h - Allocate DOS Memory Block
Function 0101h - Free DOS Memory Block
Function 0102h - Resize DOS Memory Block
Function 0200h - Get Real Mode Interrupt Vector
Function 0201h - Set Real Mode Interrupt Vector
Function 0202h - Get Processor Exception Handler Vector
Function 0203h - Set Processor Exception Handler Vector
Function 0204h - Get Protected Mode Interrupt Vector
Function 0205h - Set Protected Mode Interrupt Vector
Function 0300h - Simulate Real Mode Interrupt
Function 0301h - Call Real Mode Procedure With Far Return Frame
Function 0302h - Call Real Mode Procedure With Iret Frame
Function 0400h - Get Version
Function 0500h - Get Free Memory Information
Function 0501h - Allocate Memory Block
Function 0502h - Free Memory Block
Function 0503h - Resize Memory Block
Function 0800h - Physical Address Mapping
Function 0900h - Get and Disable Virtual Interrupt State
Function 0901h - Get and Enable Virtual Interrupt State
Function 0902h - Get Virtual Interrupt State


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0000h - Allocate LDT Descriptors
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0000h
        CX = Number of descriptors to allocate

Out:

       Carry = 0 if successful
        AX = Base selector


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0001h - Free LDT Descriptor
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0001h
        BX = Selector to free

Out:

       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0002h - Segment to Descriptor
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0002h
        BX = Real mode segment address

Out:
       Carry = 0 if successful
        AX = Selector mapped to real mode segment


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0003h - Get Next Selector Increment Value
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0003h

Out:

       Carry = 0
        AX = Value to add to get to next selector


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0006h - Get Segment Base Address
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0006h
        BX = Selector

Out:

       Carry = 0 if successful
        CX:DX = 32-bit linear base address of segment


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0007h - Set Segment Base Address
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0007h
        BX = Selector
        CX:DX = 32-bit linear base address for segment

Out:

       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0008h - Set Segment Limit
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0008h
        BX = Selector
        CX:DX = 32-bit segment limit

Out:
       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0009h - Set Descriptor Access Rights
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0009h
        BX = Selector
        CX = rights/type word


Out:
       Carry = 0 if successful

Notes:
    The access rights/type word passed to the function in CX has
    the following format :

    Bit: 15  14  13  12  11  10   9   8   7   6   5   4   3   2   1   0
       ฺฤฤฤยฤฤฤยฤฤฤยฤฤฤยฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤยฤฤฤยฤฤฤฤฤฤฤยฤฤฤยฤฤฤยฤฤฤยฤฤฤยฤฤฤฟ
       ณ G ณB/Dณ 0 ณ 0 ณ       0       ณ 1 ณ  DPL  ณ 1 ณC/DณE/CณW/Rณ A ณ
       ภฤฤฤมฤฤฤมฤฤฤมฤฤฤมฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤมฤฤฤมฤฤฤฤฤฤฤมฤฤฤมฤฤฤมฤฤฤมฤฤฤมฤฤฤู

    G  h - 0=byte granular, 1=page granular
    B/Dh - 0=default 16bit, 1=default 32bit
    DPLh - must be equal to caller's CPL
    C/Dh - 0=data, 1=code
    E/Ch - data: 0=expand-up, 1=expand-down
          code: must be 0 (non-conforming)
    W/Rh - data: 0=read, 1=read/write
          code: must be 1 (readable)
    A  h - 0=not accessed, 1=accessed


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 000Ah - Create Code Segment Alias Descriptor
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 000Ah
        BX = Code segment selector

Out:
       Carry = 0 if successful
        AX = New data selector


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 000Bh - Get Descriptor
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 000Bh
        BX = Selector
        ES:EDI = Pointer to an 8 byte buffer to receive copy of descriptor

Out:
       Carry = 0 if successful
        ES:EDI = Pointer to buffer that contains descriptor


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 000Ch - Set Descriptor
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 000Ch
        BX = Selector
        ES:EDI = Pointer to an 8 byte buffer that contains descriptor

Out:
       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0100h - Allocate DOS Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0100h
        BX = Number of paragraphs (16 byte blocks) desired

Out:

       Carry = 0 if successful
        AX = Initial real mode segment of allocated block
        DX = Selector for allocated block

       Carry = 1 if error
        AX = DOS error code:
             07h memory control blocks damaged
             08h insufficient memory available to allocate as requested
        BX = Size of largest available block in paragraphs


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0101h - Free DOS Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0101h
        DX = Selector of block to free

Out:

       Carry = 0 if successful

       Carry = 1 if error
        AX = DOS error code:
             07h memory control blocks damaged
             09h incorrect memory segment specified


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0102h - Resize DOS Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0102h
        BX = New block size in paragraphs
        DX = Selector of block to modify

Out:

       Carry = 0 if successful

       Carry = 1 if error
        AX = DOS error code:
             07h memory control blocks damaged
             08h insufficient memory  available to allocate as requested
             09h incorrect memory segment specified
        BX = Maximum block size possible in paragraphs


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0200h - Get Real Mode Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0200h
        BL = Interrupt number

Out:
       Carry = 0 if successful
        CX:DX = Segment:Offset of real mode interrupt handler


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0201h - Set Real Mode Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0201h
        BL = Interrupt number
        CX:DX = Segment:Offset of real mode interrupt handler

Out:
       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0202h - Get Processor Exception Handler Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0202h
        BL = Exception/fault number (00h-1Fh)

Out:

       Carry = 0 if successful
        CX:EDX = Selector:Offset of exception handler


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0203h - Set Processor Exception Handler Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:

        AX = 0203h
        BL = Exception/fault number (00h-1Fh)
        CX:EDX = Selector:Offset of exception handler

Out:
       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0204h - Get Protected Mode Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0204h
        BL = Interrupt number

Out:
       Carry = 0
        CX:EDX = Selector:Offset of exception handler


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0205h - Set Protected Mode Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0205h
        BL = Interrupt number
        CX:EDX = Selector:Offset of exception handler

Out:

       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0300h - Simulate Real Mode Interrupt
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0300h
        BL = Interrupt number
        BH = 0
        CX = Number of words to copy from protected mode to real mode stack
        ES:EDI = Selector:Offset of real mode call structure

Out:

       Carry = 0 if successful
        ES:EDI = Selector:Offset of modified real mode call structure
                 in the folling format:
                Offset  Length  Contents
                00h     4       EDI
                04h     4       ESI
                08h     4       EBP
                0ch     4       reserved, should be zero
                10h     4       EBX
                14h     4       EDX
                18h     4       ECX
                1ch     4       EAX
                20h     2       CPU status flags
                22h     2       ES
                24h     2       DS
                26h     2       FS
                28h     2       GS
                2ah     2       IP (reserved, ignored)
                2ch     2       CS (reserved, ignored)
                2eh     2       SP
                30h     2       SS


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0301h - Call Real Mode Procedure With Far Return Frame
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0301h
        BH = 0
        CX = Number of words to copy from protected mode to real mode stack
        ES:EDI = Selector:Offset of real mode call structure

Out:

       Carry = 0 if successful
        ES:EDI = Selector:Offset of  modified real mode call structure
                 in the folling format:
                Offset  Length  Contents
                00h     4       EDI
                04h     4       ESI
                08h     4       EBP
                0ch     4       reserved, ingored
                10h     4       EBX
                14h     4       EDX
                18h     4       ECX
                1ch     4       EAX
                20h     2       CPU status flags
                22h     2       ES
                24h     2       DS
                26h     2       FS
                28h     2       GS
                2ah     2       IP
                2ch     2       CS
                2eh     2       SP
                30h     2       SS


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0302h - Call Real Mode Procedure With Iret Frame
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0302h
        BH = 0
        CX = Number of words to copy from protected mode to real mode stack
        ES:EDI = Selector:Offset of real mode call structure

Out:

       Carry = 0 if successful
        ES:EDI = Selector:Offset of modified real mode call structure
                Offset  Length  Contents
                00h     4       EDI
                04h     4       ESI
                08h     4       EBP
                0ch     4       reserved, ingored
                10h     4       EBX
                14h     4       EDX
                18h     4       ECX
                1ch     4       EAX
                20h     2       CPU status flags
                22h     2       ES
                24h     2       DS
                26h     2       FS
                28h     2       GS
                2ah     2       IP
                2ch     2       CS
                2eh     2       SP
                30h     2       SS


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0400h - Get Version
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0400h

Out:

        AH = Major version
        AL = Minor version
        BX = Flags
        CL = Processor type
             02 = 80286
             03 = 80386
             04 = 80486
        DH = Current value of virtual master PIC base interrupt
        DL = Current value of virtual slave PIC base interrupt
       Carry = 0


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0500h - Get Free Memory Information
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0500h
        ES:EDI = Selector:Offset of 30h byte buffer

Out:

       Carry = 0 if successful
        ES:EDI = Selector:Offset of buffer with the following structure


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0501h - Allocate Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0501h
        BX:CX = Size of memory block to allocate in bytes

Out:

       Carry = 0 if successful
        BX:CX = Linear address of allocated memory block
        SI:DI = Memory block handle (used to resize and free)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0502h - Free Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0502h
        SI:DI = Handle of memory block to free

Out:

       Carry = 0 if successful


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0503h - Resize Memory Block
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:

        AX = 0503h
        BX:CX = New size of memory block to allocate in bytes
        SI:DI = Handle of memory block to resize

Out:

       Carry = 0 if successful
        BX:CX = New linear address of memory block
        SI:DI = New handle of memory block


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0800h - Physical Address Mapping
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0800h
        BX:CX = Physical address of memory
        SI:DI = Size of region to map in bytes

Out:

       Carry = 0 if successful
        BX:CX =  Linear address  that can be used to access the physical memory


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0900h - Get and Disable Virtual Interrupt State
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0900h

Out:

       Carry = 0
        AL = 0 if virtual interrupts were previously disabled
        AL = 1 if virtual interrupts were previously enabled


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0901h - Get and Enable Virtual Interrupt State
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0901h

Out:

       Carry = 0
        AL = 0 if virtual interrupts were previously disabled
        AL = 1 if virtual interrupts were previously enabled


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 0902h - Get Virtual Interrupt State
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:

        AX = 0902h

Out:
       Carry = 0
        AL = 0 if virtual interrupts are disabled
        AL = 1 if virtual interrupts are enabled


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ Les fonctions du DOS (interruption 21h) supportes par l'E.O.S           บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ

Function  1h - Keyboard Input with Echo
Function  2h - Display Output
Function  3h - Wait for Auxiliary Device Input
Function  4h - Auxiliary Output
Function  5h - Printer Output
Function  6h - Direct Console I/O
Function  7h - Direct Console Input Without Echo
Function  8h - Console Input Without Echo
Function  9h - Print String
Function  Ah - Buffered Keyboard Input
Function  Bh - Check Standard Input Status
Function  Ch - Clear Keyboard Buffer and Invoke Keyboard Function
Function  Dh - Disk Reset
Function  Eh - Select Disk
Function  Fh - Open a File Using FCB
Function 10h - Close a File Using FCB
Function 11h - Search for First Entry Using FCB
Function 12h - Search for Next Entry Using FCB
Function 13h - Delete File Using FCB
Function 14h - Sequential Read Using FCB
Function 15h - Sequential Write Using FCB
Function 16h - Create a File Using FCB
Function 17h - Rename a File Using FCB
Function 19h - Get Current Default Drive
Function 1Ah - Set Disk Transfer Address (DTA)
Function 21h - Random Read Using FCB
Function 22h - Random Write Using FCB
Function 23h - Get File Size Using FCB
Function 24h - Set Relative Record Field in FCB
Function 25h - Set Interrupt Vector
Function 27h - Random Block Read Using FCB
Function 28h - Random Block Write Using FCB
Function 2Ah - Get Date
Function 2Bh - Set Date
Function 2Ch - Get Time
Function 2Dh - Set Time
Function 2Eh - Set/Reset Verify Switch
Function 2Fh - Get Disk Transfer Address (DTA)
Function 30h - Get DOS Version Number
Function 33h - Get/Set System Values (Ctl-Break/Boot Drive)
Function 34h - Get Address to DOS Critical Flag
Function 35h - Get Interrupt Vector
Function 36h - Get Disk Free Space
Function 37h - Get/Set Switch Character
Function 39h - Create Subdirectory
Function 3Ah - Remove Subdirectory
Function 3Bh - Change Current Directory
Function 3Ch - Create File Using Handle
Function 3Dh - Open File Using Handle
Function 3Eh - Close File Using Handle
Function 3Fh - Read From File or Device Using Handle
Function 40h - Write To File or Device Using Handle
Function 41h - Delete File
Function 42h - Move File Pointer Using Handle
Function 43h - Get/Set File Attributes
Function 45h - Duplicate File Handle
Function 46h - Force Duplicate File Handle
Function 47h - Get Current Directory
Function 48h - Allocate Memory
Function 49h - Free Allocated Memory
Function 4Ah - Modify Allocated Memory Block  (SETBLOCK)
Function 4Bh - Load and Execute Program
Function 4Ch - Terminate Process With Return Code
Function 4Dh - Get Return Code of Sub-process
Function 4Eh - Find First Matching File
Function 4Fh - Find Next Matching File
Function 54h - Get Verify Setting
Function 56h - Rename File
Function 58h - Get/Set Memory Allocation Strategy
Function 59h - Get Extended Error Information
Function 5Ah - Create Temporary File
Function 5Bh - Create File
Function 60h - Get Fully Qualified File Name
Function 62h - Get PSP Address                                           ~v3.05


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 1h - Keyboard Input with Echo
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 01
Out:
	AL = character from standard input device


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2h - Display Output
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 02
	DL = character to output
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3h - Wait for Auxiliary Device Input
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 03
Out:
	AL = character from the auxiliary device


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4h - Auxiliary Output
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 04
	DL = character to output
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 5h - Printer Output
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 05
	DL = character to output
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 6h - Direct Console I/O
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 06
	DL = (0-FE) character to output
	   = FF if console input request
Out:
	AL = input character if console input request (DL=FF)
	ZF = 0	if console request character available (in AL)
	   = 1	if no character is ready, and function request
	     was console input


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 7h - Direct Console Input Without Echo
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 07
Out:
	AL = character from STDIN


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 8h - Console Input Without Echo
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 08
Out:
	AL = character from STDIN


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 9h - Print String
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 09
        DS:EDX = pointer to string ending in "$"
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Ah - Buffered Keyboard Input
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0A
        DS:EDX = pointer to input buffer
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Bh - Check Standard Input Status
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0B
Out:
	AL = 00 if no character available
	   = FF if character available


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Ch - Clear Keyboard Buffer and Invoke Keyboard Function
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0C
	AL = 01, 06, 07, 08 or 0A   (INT 21 input functions)
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Dh - Disk Reset
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0D
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Eh - Select Disk
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0E
        DL = zero based, drive number (0-25, A:h - Z:)
Out:
	AL = one based, total number of logical drives including
	     hardfiles (1-26)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function Fh - Open a File Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 0F
        DS:EDX = pointer to unopened FCB

Out:
	AL = 00 if file opened
	   = FF if unable to open


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 10h - Close a File Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 10h
        DS:EDX = pointer to opened FCB
Out:
	AL = 00  if file closed
	   = FF  if file not closed


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 11h - Search for First Entry Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 11h
        DS:EDX = pointer to unopened FCB
Out:
	AL = 00 if matching file found
	   = FF if file not found


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 12h - Search for Next Entry Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 12h
        DS:EDX = pointer to unopened FCB
Out:
	AL = 00 if file found
	   = FF if file not found


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 13h - Delete File Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 13h
        DS:EDX = pointer to an unopened FCB
Out:
	AL = 00 if file deleted
	   = FF if file not found


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 14h - Sequential Read Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 14h
        DS:EDX = pointer to an opened FCB
Out:
	AL = 00 if successful read
	   = 01 if end of file (no data read)
           = 02 if DTA is too small
	   = 03 if end of file or partial record read


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 15h - Sequential Write Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 15h
        DS:EDX = pointer to an opened FCB

Out:
	AL = 00 if write was successful
	   = 01 if diskette is full or read only
           = 02 if DTA is too small


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 16h - Create a File Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:
	AH = 16h
        DS:EDX = pointer to an unopened FCB
Out:
	AL = 00 if file created
	   = FF if file creation failed


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 17h - Rename a File Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 17h
        DS:EDX = pointer to a modified FCB
Out:
	AL = 00 if file renamed
	   = FF if file not renamed


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 19h - Get Current Default Drive
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 19h
Out:
	AL = current default drive (0=A,1=B,etc)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 1Ah - Set Disk Transfer Address (DTA)
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 1A
        DS:EDX = pointer to DTA
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 21h - Random Read Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 21h
        DS:EDX = pointer to an opened FCB
Out:
	AL = 00 if read successful
	   = 01 if EOF (no data read)
           = 02 if DTA is too small
	   = 03 if EOF (partial record read)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 22h - Random Write Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:
	AH = 22h
        DS:EDX = far pointer to an opened FCB

Out:
	AL = 00 if write successful
	   = 01 if diskette full or read only
           = 02 if DTA is too small


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 23h - Get File Size Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 23h
        DS:EDX = pointer to an unopened FCB
Out:
	AL = 00 if successful
	   = FF if file not found


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 24h - Set Relative Record Field in FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 24h
        DS:EDX = pointer to an opened FCB

Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 25h - Set Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 25h
	AL = interrupt number
        DS:EDX = pointer to interrupt handler
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 27h - Random Block Read Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 27h
	CX = number of records to read
        DS:EDX = pointer to an opened FCB
Out:
	AL = 00 if read was successful
	   = 01 if EOF (no data read)
           = 02 if DTA is too small
	   = 03 if EOF (partial record read)
	CX = actual number of records read


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 28h - Random Block Write Using FCB
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:
	AH = 28h
	CX = number of records to write
        DS:EDX = pointer to an opened FCB

Out:
	AL = 00 if write successful
	   = 01 if diskette full or read only
           = 02 if DTA is too small
	CX = number of records written


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Ah - Get Date
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 2A
Out:
	AL = day of the week (0=Sunday)
	CX = year (1980-2099)
	DH = month (1-12)
	DL = day (1-31)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Bh - Set Date
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

IN:
	AH = 2B
	CX = year (1980-2099)
	DH = month (1-12)
	DL = day (1-31)
Out:
	AL = 00 if date change successful
	   = FF if invalid date


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Ch - Get Time
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 2C
Out:
	CH = hour (0-23)
	CL = minutes (0-59)
	DH = seconds (0-59)
	DL = hundredths (0-99)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Dh - Set Time
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 2D
	CH = hour (0-23)
	CL = minutes (0-59)
	DH = seconds (0-59)
	DL = hundredths (0-99)

Out:
	AL = 00 if time change successful
	   = FF if time invalid


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Eh - Set/Reset Verify Switch
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 2E
	AL = 00 to set off
	   = 01 to set verify on
	DH = 00 for DOS versions before 3.0
Out:

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 2Fh - Get Disk Transfer Address (DTA)
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 2F
Out:
        ES:EBX = pointer to current DTA


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 30h - Get DOS Version Number
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 30h
Out:
	AL = major version number (2-5)
	AH = minor version number (in hundredths decimal)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 33h - Get/Set System Values (Ctl-Break/Boot Drive)
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 33h
	AL = 00 to get Ctrl-Break checking flag
	   = 01 to set Ctrl-Break checking flag
	   = 02 to set extended Ctrl-Break checking
           = 05 get boot drive
	DL = 00 to set Ctrl-Break checking off
	   = 01 to set Ctrl-Break checking on
           = boot drive for subfunction 5

Out:
	DL = 00 Ctrl-Break checking OFF (AL=0 or AL=2)
	   = 01 Ctrl-Break checking ON	(AL=0 or AL=2)
           = boot drive number (1-26, A:h - Z:) (AL=5)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 34h - Get Address to DOS Critical Flag
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 34h
Out:
        ES:EBX = address of a byte indicating whether a DOS call is
		in progress.  No DOS calls should be made if set.


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 35h - Get Interrupt Vector
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 35h
	AL = interrupt vector number
Out:
        ES:EBX = pointer to interrupt handler


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 36h - Get Disk Free Space
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 36h
        DL = drive number
Out:
	AX = sectors per cluster
	   = FFFF if drive is invalid
	BX = number of available clusters
	CX = number of bytes per sector
	DX = number of clusters per drive


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 37h - Get/Set Switch Character
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 37h
	AL = 0	get switch character into DL;  some systems return "-"
	   = 1	set switch character to value in DL
	   = 2	read device prefix flag into DL;  returns DL = 0 indicating
		devices must be accessed using /DEV/device. A non-zero value
		indicates devices may be accessed without prefix
	   = 3	set device prefix flag, device names must begin with \DEV\.
	DL = new switch character (AL=1)
	   = 00  \DEV\ must preceed device names (AL=3)
           = 01  \DEV\ is not neccesary in device names (AL=3)
Out:
	AL = FF  illegal subfunction code specified
	DL = current switch character (AL=0)
	   = device availability (AL=2, always FF with DOS 4.x+)


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 39h - Create Subdirectory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 39h
        DS:EDX = pointer to ASCIIZ path name
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Ah - Remove Subdirectory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:
	AH = 3A
        DS:EDX = pointer to ASCIIZ path name
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Bh - Change Current Directory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 3B
        DS:EDX = pointer to ASCIIZ path name
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Ch - Create File Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


	AH = 3C
        CX = file attribute
        DS:EDX = pointer to ASCIIZ path name
Out:
       Carry = 0 if successful
        AX = files handle
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Dh - Open File Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

	AH = 3D
	AL = open access mode
        DS:EDX = pointer to an ASCIIZ file name
Out:
       Carry = 0 if successful
        AX = files handle
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Eh - Close File Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 3E
	BX = file handle to close
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 3Fh - Read From File or Device Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 3F
	BX = file handle
        ECX = number of bytes to read
        DS:EDX = pointer to read buffer
Out:
       Carry = 0 if successful
        EAX = Number of bytes readen
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 40h - Write To File or Device Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 40h
	BX = file handle
        ECX = number of bytes to write
        DS:EDX = pointer to write buffer
Out:
       Carry = 0 if successful
        EAX = Number of bytes written
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 41h - Delete File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 41h
        DS:EDX = pointer to an ASCIIZ filename
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 42h - Move File Pointer Using Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 42h
        AL = origin of move
	BX = file handle
	CX = high order word of number of bytes to move
	DX = low order word of number of bytes to move

Out:
       Carry = 0 if successful
        DX:AX = new pointer location
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 43h - Get/Set File Attributes
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 43h
	AL = 00 to get attribute
	   = 01 to set attribute
        DS:EDX = pointer to an ASCIIZ path name
	CX = attribute to set
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 45h - Duplicate File Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 45h
	BX = file handle
Out:
       Carry = 0 if successful
        AX = New handle
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 46h - Force Duplicate File Handle
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 46h
	BX = existing file handle
	CX = second file handle
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 47h - Get Current Directory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 47h
        DL = drive number
        DS:ESI = pointer to a 64 byte user buffer
Out:
       Carry = 0 if successful
        DS:ESI = pointer ASCIIZ directory path string
       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 48h - Allocate Memory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 48h
	BX = number of memory paragraphs requested
Out:
       Carry = 0 if successful
        EAX = selector for memory block
        EBX = ??????

       Carry = 1 if error
        EAX = error code
        EBX = size in paras of the largest block of memory available
Notes:
        EBX may be random


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 49h - Free Allocated Memory
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


In:
	AH = 49h
        ES = selector of the memory block
Out:
       Carry = 0 if successful
        EBX = ??????

       Carry = 1 if error
        EAX = error code
Notes:
        EBX may be random


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Ah - Modify Allocated Memory Block  (SETBLOCK)
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4A
	BX = new requested block size in paragraphs
	ES = segment of the block (~MCB~ + 1 para)
Out:
       Carry = 0 if successful
        EBX = ??????

       Carry = 1 if error
        EAX = error code
        EBX = size in paras of the largest block of memory available


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Bh - Load and Execute Program
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4B
	AL = 00  to load and execute program
        DS:EDX = pointer to an ASCIIZ filename
        ES:EBX = pointer to a parameter block
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Ch - Terminate Process With Return Code
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4C
        AL = return code
Out:


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Dh - Get Return Code of Sub-process
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4D
Out:
	AH = system exit code  (indicates normal termination)
	   = 00 for normal termination
	   = 01 if terminated by ctl-break
	   = 02 if critical device error
	AL = child exit code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Eh - Find First Matching File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4E
        CX = attribute used during search
        DS:EDX = pointer to ASCIIZ filespec
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 4Fh - Find Next Matching File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 4F
        DS:EDX = unchanged from previous function 4E
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 54h - Get Verify Setting
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 54h
Out:
	AL = 00  verify off
	   = 01  verify on


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 56h - Rename File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 56h
        DS:EDX = pointer to old ASCIIZ path/filename
        ES:EDI = pointer to new ASCIIZ path/filename
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 58h - Get/Set Memory Allocation Strategy
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 58h
	AL = 00  get strategy code
	   = 01  set strategy code
	BX = strategy code (when AL = 01)
	   = 00  first fit  (default)
	   = 01  best fit
	   = 02  last fit
Out:
       Carry = 0 if successful

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 59h - Get Extended Error Information
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 59h
        BX = 00
Out:
       Carry = 0 if successful
        AX = error code
        BH = error class
	BL = suggested action
	CH = locus

       Carry = 1 if error


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 5Ah - Create Temporary File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 5A
	CX = attribute
        DS:EDX = pointer to ASCIIZ path ending in '\'
Out:
       Carry = 0 if successful
        AX = handle
        DS:EDX = pointer to updated ASCIIZ filespec

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 5Bh - Create File
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ


	AH = 5B
	CX = attribute
        DS:EDX = pointer to ASCIIZ path/filename


       Carry = 0 if successful
        AX = handle

       Carry = 1 if error
        EAX = error code


ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ
Function 60h - Get Fully Qualified File Name
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
	AH = 60h
        DS:ESI = pointer to ASCIIZ string containing unqualified filename
        ES:EDI = pointer to 128 byte buffer to contain fully qualified filename
Out:
       Carry = 0 if successful
        ES:EDI = address of fully qualified filename string

       Carry = 1 if error
        EAX = error code

ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ~v3.05
Function 62h - Get PSP Address
ฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤ

In:
        AH = 62h
Out:
        BX = PSP Selector


ษออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออป
บ                                                                          บ
บ End of EOS documentation                                                 บ
บ                                                                          บ
ศออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผ